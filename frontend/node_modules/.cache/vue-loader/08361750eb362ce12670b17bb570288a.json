{"remainingRequest":"/Users/tbw/work/btProject/reaction-cut/frontend/node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.5.22_cache-loader@4.1.0_webpack@4.47.0__css-load_f9e102e5cbb5fa5aa7d45569a28cebe6/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tbw/work/btProject/reaction-cut/frontend/src/views/QRCodeDebugView.vue?vue&type=style&index=0&id=deb46140&scoped=true&lang=css","dependencies":[{"path":"/Users/tbw/work/btProject/reaction-cut/frontend/src/views/QRCodeDebugView.vue","mtime":1762013377086},{"path":"/Users/tbw/work/btProject/reaction-cut/frontend/node_modules/.pnpm/css-loader@3.6.0_webpack@5.102.1/node_modules/css-loader/dist/cjs.js","mtime":1762013131130},{"path":"/Users/tbw/work/btProject/reaction-cut/frontend/node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.5.22_cache-loader@4.1.0_webpack@4.47.0__css-load_f9e102e5cbb5fa5aa7d45569a28cebe6/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1761026704430},{"path":"/Users/tbw/work/btProject/reaction-cut/frontend/node_modules/.pnpm/postcss-loader@3.0.0/node_modules/postcss-loader/src/index.js","mtime":1762013131924},{"path":"/Users/tbw/work/btProject/reaction-cut/frontend/node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js","mtime":1761026713270},{"path":"/Users/tbw/work/btProject/reaction-cut/frontend/node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.5.22_cache-loader@4.1.0_webpack@4.47.0__css-load_f9e102e5cbb5fa5aa7d45569a28cebe6/node_modules/vue-loader/lib/index.js","mtime":1761026704427}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5xcmNvZGUtZGVidWctdmlldyB7CiAgcGFkZGluZzogMjBweDsKICBkaXNwbGF5OiBmbGV4OwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0OwogIG1pbi1oZWlnaHQ6IGNhbGMoMTAwdmggLSA4NHB4KTsKfQoKLmRlYnVnLWNhcmQgewogIHdpZHRoOiAxMDAlOwogIG1heC13aWR0aDogODAwcHg7Cn0KCi5kZWJ1Zy1zZWN0aW9uIHsKICBtYXJnaW4tYm90dG9tOiAyMHB4Owp9CgouZGVidWctc2VjdGlvbiAuZWwtYnV0dG9uIHsKICBtYXJnaW4tcmlnaHQ6IDEwcHg7Cn0KCi5kZWJ1Zy1pbmZvIHsKICBtYXJnaW46IDIwcHggMDsKICBwYWRkaW5nOiAxNXB4OwogIGJhY2tncm91bmQtY29sb3I6ICNmNWY3ZmE7CiAgYm9yZGVyLXJhZGl1czogNHB4OwogIGJvcmRlcjogMXB4IHNvbGlkICNlYmVlZjU7CiAgbWF4LWhlaWdodDogMzAwcHg7CiAgb3ZlcmZsb3cteTogYXV0bzsKfQoKLmRlYnVnLWluZm8gaDMgewogIG1hcmdpbi10b3A6IDA7Cn0KCi5kZWJ1Zy1pdGVtIHsKICBtYXJnaW4tYm90dG9tOiA4cHg7CiAgZGlzcGxheTogZmxleDsKICBhbGlnbi1pdGVtczogY2VudGVyOwp9CgouZGVidWctaXRlbSAuZWwtdGFnIHsKICBtYXJnaW4tcmlnaHQ6IDEwcHg7CiAgZmxleC1zaHJpbms6IDA7Cn0KCi5kZWJ1Zy1tZXNzYWdlIHsKICB3b3JkLWJyZWFrOiBicmVhay1hbGw7Cn0KCi5xcmNvZGUtZGlzcGxheSB7CiAgbWFyZ2luOiAyMHB4IDA7CiAgcGFkZGluZzogMjBweDsKICBib3JkZXI6IDFweCBzb2xpZCAjZWJlZWY1OwogIGJvcmRlci1yYWRpdXM6IDRweDsKfQoKLnFyY29kZS1kaXNwbGF5IGgzIHsKICBtYXJnaW4tdG9wOiAwOwp9CgoucXJjb2RlLWNhbnZhcy13cmFwcGVyIHsKICBkaXNwbGF5OiBmbGV4OwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIG1hcmdpbjogMjBweCAwOwogIG1pbi1oZWlnaHQ6IDMwMHB4OwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgYm9yZGVyOiAxcHggZGFzaGVkICNkY2RmZTY7CiAgYm9yZGVyLXJhZGl1czogNHB4Owp9CgouZXJyb3ItbWVzc2FnZSB7CiAgbWFyZ2luOiAyMHB4IDA7Cn0K"},{"version":3,"sources":["QRCodeDebugView.vue"],"names":[],"mappings":";AAiLA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"QRCodeDebugView.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"qrcode-debug-view\">\n    <el-card class=\"debug-card\">\n      <h2>二维码生成调试</h2>\n      \n      <div class=\"debug-section\">\n        <el-button type=\"primary\" @click=\"debugQRCodeGeneration\" :loading=\"loading\">\n          {{ loading ? '调试中...' : '调试二维码生成' }}\n        </el-button>\n        <el-button @click=\"testMockData\">使用模拟数据测试</el-button>\n        <el-button @click=\"testQRCodeLibrary\">测试QRCode库</el-button>\n      </div>\n      \n      <div class=\"debug-info\" v-if=\"debugInfo.length > 0\">\n        <h3>调试信息:</h3>\n        <div v-for=\"(info, index) in debugInfo\" :key=\"index\" class=\"debug-item\">\n          <el-tag :type=\"info.type\">{{ info.time }}</el-tag>\n          <span class=\"debug-message\">{{ info.message }}</span>\n        </div>\n      </div>\n      \n      <div v-if=\"qrCodeUrl\" class=\"qrcode-display\">\n        <h3>生成的二维码:</h3>\n        <div ref=\"debugQRCodeCanvas\" class=\"qrcode-canvas-wrapper\"></div>\n        <p>二维码URL: {{ qrCodeUrl }}</p>\n      </div>\n      \n      <div v-if=\"errorMessage\" class=\"error-message\">\n        <el-alert type=\"error\" :title=\"errorMessage\" show-icon></el-alert>\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { generateQRCode } from '@/api/bilibiliAuth'\nimport { debugGenerateQRCode, testBilibiliQRCodeGeneration } from '@/utils/qrcodeDebug'\n\nexport default {\n  name: 'QRCodeDebugView',\n  data() {\n    return {\n      loading: false,\n      debugInfo: [],\n      qrCodeUrl: '',\n      errorMessage: ''\n    }\n  },\n  methods: {\n    addDebugInfo(message, type = 'info') {\n      const time = new Date().toLocaleTimeString()\n      this.debugInfo.push({ time, message, type })\n      console.log(`[${time}] ${message}`)\n    },\n    \n    async debugQRCodeGeneration() {\n      this.loading = true\n      this.debugInfo = []\n      this.qrCodeUrl = ''\n      this.errorMessage = ''\n      \n      try {\n        this.addDebugInfo('开始调试二维码生成...', 'primary')\n        \n        // 调用API生成二维码\n        this.addDebugInfo('调用API生成二维码...')\n        const response = await generateQRCode()\n        this.addDebugInfo('API响应: ' + JSON.stringify(response, null, 2), 'success')\n        \n        if (response.code === 0) {\n          this.qrCodeUrl = response.data.url\n          this.addDebugInfo('二维码URL: ' + this.qrCodeUrl, 'success')\n          \n          // 等待DOM更新\n          await this.$nextTick()\n          this.addDebugInfo('DOM已更新，准备生成二维码')\n          \n          // 生成二维码\n          await this.generateDebugQRCode()\n        } else {\n          this.errorMessage = 'API返回错误: ' + response.message\n          this.addDebugInfo('API返回错误: ' + response.message, 'danger')\n        }\n      } catch (error) {\n        console.error('调试二维码生成失败:', error)\n        this.errorMessage = '调试失败: ' + error.message\n        this.addDebugInfo('调试失败: ' + error.message, 'danger')\n      } finally {\n        this.loading = false\n      }\n    },\n    \n    async testMockData() {\n      this.debugInfo = []\n      this.qrCodeUrl = ''\n      this.errorMessage = ''\n      \n      try {\n        this.addDebugInfo('开始测试模拟数据...', 'primary')\n        \n        const result = await testBilibiliQRCodeGeneration()\n        this.addDebugInfo('测试结果: ' + JSON.stringify(result, null, 2), result.success ? 'success' : 'danger')\n        \n        if (result.success) {\n          this.qrCodeUrl = result.data.url\n          this.addDebugInfo('二维码URL: ' + this.qrCodeUrl, 'success')\n          \n          // 等待DOM更新\n          await this.$nextTick()\n          this.addDebugInfo('DOM已更新，准备生成二维码')\n          \n          // 生成二维码\n          await this.generateDebugQRCode()\n        } else {\n          this.errorMessage = result.message\n          this.addDebugInfo(result.message, 'danger')\n        }\n      } catch (error) {\n        console.error('测试模拟数据失败:', error)\n        this.errorMessage = '测试失败: ' + error.message\n        this.addDebugInfo('测试失败: ' + error.message, 'danger')\n      }\n    },\n    \n    async testQRCodeLibrary() {\n      this.debugInfo = []\n      this.qrCodeUrl = 'https://www.bilibili.com'\n      this.errorMessage = ''\n      \n      try {\n        this.addDebugInfo('开始测试QRCode库...', 'primary')\n        this.addDebugInfo('测试URL: ' + this.qrCodeUrl, 'info')\n        \n        // 等待DOM更新\n        await this.$nextTick()\n        this.addDebugInfo('DOM已更新，准备生成二维码')\n        \n        // 生成二维码\n        await this.generateDebugQRCode()\n      } catch (error) {\n        console.error('测试QRCode库失败:', error)\n        this.errorMessage = '测试失败: ' + error.message\n        this.addDebugInfo('测试失败: ' + error.message, 'danger')\n      }\n    },\n    \n    async generateDebugQRCode() {\n      try {\n        this.addDebugInfo('开始生成二维码...', 'primary')\n        \n        if (!this.qrCodeUrl) {\n          const error = new Error('二维码URL为空')\n          this.addDebugInfo('缺少生成二维码的必要参数: 二维码URL为空', 'warning')\n          throw error\n        }\n        \n        if (!this.$refs.debugQRCodeCanvas) {\n          const error = new Error('二维码Canvas容器未找到')\n          this.addDebugInfo('缺少生成二维码的必要参数: 二维码Canvas容器未找到', 'warning')\n          throw error\n        }\n        \n        // 使用调试工具生成二维码\n        await debugGenerateQRCode(this.qrCodeUrl, this.$refs.debugQRCodeCanvas)\n        this.addDebugInfo('二维码生成成功', 'success')\n      } catch (error) {\n        console.error('生成调试二维码失败:', error)\n        this.errorMessage = '生成二维码失败: ' + error.message\n        this.addDebugInfo('生成二维码失败: ' + error.message, 'danger')\n        throw error\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.qrcode-debug-view {\n  padding: 20px;\n  display: flex;\n  justify-content: center;\n  align-items: flex-start;\n  min-height: calc(100vh - 84px);\n}\n\n.debug-card {\n  width: 100%;\n  max-width: 800px;\n}\n\n.debug-section {\n  margin-bottom: 20px;\n}\n\n.debug-section .el-button {\n  margin-right: 10px;\n}\n\n.debug-info {\n  margin: 20px 0;\n  padding: 15px;\n  background-color: #f5f7fa;\n  border-radius: 4px;\n  border: 1px solid #ebeef5;\n  max-height: 300px;\n  overflow-y: auto;\n}\n\n.debug-info h3 {\n  margin-top: 0;\n}\n\n.debug-item {\n  margin-bottom: 8px;\n  display: flex;\n  align-items: center;\n}\n\n.debug-item .el-tag {\n  margin-right: 10px;\n  flex-shrink: 0;\n}\n\n.debug-message {\n  word-break: break-all;\n}\n\n.qrcode-display {\n  margin: 20px 0;\n  padding: 20px;\n  border: 1px solid #ebeef5;\n  border-radius: 4px;\n}\n\n.qrcode-display h3 {\n  margin-top: 0;\n}\n\n.qrcode-canvas-wrapper {\n  display: flex;\n  justify-content: center;\n  margin: 20px 0;\n  min-height: 300px;\n  align-items: center;\n  border: 1px dashed #dcdfe6;\n  border-radius: 4px;\n}\n\n.error-message {\n  margin: 20px 0;\n}\n</style>"]}]}