{"remainingRequest":"/Users/tbw/work/btProject/reaction-cut/frontend/node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.5.22_cache-loader@4.1.0_webpack@4.47.0__css-load_f9e102e5cbb5fa5aa7d45569a28cebe6/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tbw/work/btProject/reaction-cut/frontend/src/views/VideoStreamTest.vue?vue&type=style&index=0&id=fac3b57a&scoped=true&lang=css","dependencies":[{"path":"/Users/tbw/work/btProject/reaction-cut/frontend/src/views/VideoStreamTest.vue","mtime":1761983734854},{"path":"/Users/tbw/work/btProject/reaction-cut/frontend/node_modules/.pnpm/css-loader@3.6.0_webpack@5.102.1/node_modules/css-loader/dist/cjs.js","mtime":1762013131130},{"path":"/Users/tbw/work/btProject/reaction-cut/frontend/node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.5.22_cache-loader@4.1.0_webpack@4.47.0__css-load_f9e102e5cbb5fa5aa7d45569a28cebe6/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1761026704430},{"path":"/Users/tbw/work/btProject/reaction-cut/frontend/node_modules/.pnpm/postcss-loader@3.0.0/node_modules/postcss-loader/src/index.js","mtime":1762013131924},{"path":"/Users/tbw/work/btProject/reaction-cut/frontend/node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js","mtime":1761026713270},{"path":"/Users/tbw/work/btProject/reaction-cut/frontend/node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.5.22_cache-loader@4.1.0_webpack@4.47.0__css-load_f9e102e5cbb5fa5aa7d45569a28cebe6/node_modules/vue-loader/lib/index.js","mtime":1761026704427}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci52aWRlby1zdHJlYW0tdGVzdCB7CiAgcGFkZGluZzogMjBweDsKICBtYXgtd2lkdGg6IDEyMDBweDsKICBtYXJnaW46IDAgYXV0bzsKfQoKLmZvcm0tZ3JvdXAgewogIG1hcmdpbi1ib3R0b206IDE1cHg7Cn0KCi5mb3JtLWdyb3VwIGxhYmVsIHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgd2lkdGg6IDE1MHB4OwogIGZvbnQtd2VpZ2h0OiBib2xkOwp9CgouZm9ybS1ncm91cCBpbnB1dCwKLmZvcm0tZ3JvdXAgc2VsZWN0IHsKICB3aWR0aDogMzAwcHg7CiAgcGFkZGluZzogOHB4OwogIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7CiAgYm9yZGVyLXJhZGl1czogNHB4Owp9CgouZm9ybS1ncm91cCBidXR0b24gewogIG1hcmdpbi1sZWZ0OiAxMHB4OwogIHBhZGRpbmc6IDhweCAxNnB4OwogIGJhY2tncm91bmQtY29sb3I6ICMwMDdiZmY7CiAgY29sb3I6IHdoaXRlOwogIGJvcmRlcjogbm9uZTsKICBib3JkZXItcmFkaXVzOiA0cHg7CiAgY3Vyc29yOiBwb2ludGVyOwp9CgouZm9ybS1ncm91cCBidXR0b246ZGlzYWJsZWQgewogIGJhY2tncm91bmQtY29sb3I6ICNjY2M7CiAgY3Vyc29yOiBub3QtYWxsb3dlZDsKfQoKYnV0dG9uIHsKICBwYWRkaW5nOiAxMHB4IDIwcHg7CiAgYmFja2dyb3VuZC1jb2xvcjogIzI4YTc0NTsKICBjb2xvcjogd2hpdGU7CiAgYm9yZGVyOiBub25lOwogIGJvcmRlci1yYWRpdXM6IDRweDsKICBjdXJzb3I6IHBvaW50ZXI7CiAgZm9udC1zaXplOiAxNnB4Owp9CgpidXR0b246ZGlzYWJsZWQgewogIGJhY2tncm91bmQtY29sb3I6ICNjY2M7CiAgY3Vyc29yOiBub3QtYWxsb3dlZDsKfQoKLmxvYWRpbmcgewogIHRleHQtYWxpZ246IGNlbnRlcjsKICBwYWRkaW5nOiAyMHB4OwogIGZvbnQtc2l6ZTogMThweDsKfQoKLnJlc3VsdCB7CiAgbWFyZ2luLXRvcDogMjBweDsKICBwYWRkaW5nOiAxNXB4OwogIGJhY2tncm91bmQtY29sb3I6ICNmOGY5ZmE7CiAgYm9yZGVyLXJhZGl1czogNHB4Owp9CgoucmVzdWx0IGgzLAoucmVzdWx0IGg0LAoucmVzdWx0IGg1LAoucmVzdWx0IGg2IHsKICBtYXJnaW4tdG9wOiAwOwp9CgoucmVzdWx0IHByZSB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2U5ZWNlZjsKICBwYWRkaW5nOiAxMHB4OwogIGJvcmRlci1yYWRpdXM6IDRweDsKICBvdmVyZmxvdy14OiBhdXRvOwp9Cgouc3RyZWFtLWluZm8gdWwgewogIGxpc3Qtc3R5bGUtdHlwZTogbm9uZTsKICBwYWRkaW5nOiAwOwp9Cgouc3RyZWFtLWluZm8gbGkgewogIG1hcmdpbi1ib3R0b206IDEwcHg7CiAgcGFkZGluZzogMTBweDsKICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsKICBib3JkZXItcmFkaXVzOiA0cHg7CiAgYm94LXNoYWRvdzogMCAxcHggM3B4IHJnYmEoMCwwLDAsMC4xKTsKfQoKLmVycm9yIHsKICBtYXJnaW4tdG9wOiAyMHB4OwogIHBhZGRpbmc6IDE1cHg7CiAgYmFja2dyb3VuZC1jb2xvcjogI2Y4ZDdkYTsKICBjb2xvcjogIzcyMWMyNDsKICBib3JkZXItcmFkaXVzOiA0cHg7Cn0K"},{"version":3,"sources":["VideoStreamTest.vue"],"names":[],"mappings":";AAoNA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"VideoStreamTest.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"video-stream-test\">\n    <h2>视频流URL测试</h2>\n    \n    <div class=\"form-group\">\n      <label>视频BV号:</label>\n      <input v-model=\"bvid\" placeholder=\"请输入BV号，如：BV1Xx411175n\" />\n    </div>\n    \n    <div class=\"form-group\">\n      <label>视频CID:</label>\n      <input v-model=\"cid\" placeholder=\"请输入CID\" />\n      <button @click=\"getVideoInfo\" :disabled=\"!bvid\">获取CID</button>\n    </div>\n    \n    <div class=\"form-group\">\n      <label>清晰度 (qn):</label>\n      <select v-model=\"qn\">\n        <option value=\"\">默认</option>\n        <option value=\"6\">240P 极速</option>\n        <option value=\"16\">360P 流畅</option>\n        <option value=\"32\">480P 清晰</option>\n        <option value=\"64\">720P 高清</option>\n        <option value=\"74\">720P60 高帧率</option>\n        <option value=\"80\">1080P 高清</option>\n        <option value=\"100\">智能修复</option>\n        <option value=\"112\">1080P+ 高码率</option>\n        <option value=\"116\">1080P60 高帧率</option>\n        <option value=\"120\">4K 超清</option>\n        <option value=\"125\">HDR 真彩色</option>\n        <option value=\"126\">杜比视界</option>\n        <option value=\"127\">8K 超高清</option>\n      </select>\n    </div>\n    \n    <div class=\"form-group\">\n      <label>格式标识 (fnval):</label>\n      <select v-model=\"fnval\">\n        <option value=\"\">默认</option>\n        <option value=\"0\">FLV 格式</option>\n        <option value=\"1\">MP4 格式</option>\n        <option value=\"16\">DASH 格式</option>\n        <option value=\"64\">HDR 视频</option>\n        <option value=\"128\">4K 分辨率</option>\n        <option value=\"256\">杜比音频</option>\n        <option value=\"512\">杜比视界</option>\n        <option value=\"1024\">8K 分辨率</option>\n        <option value=\"2048\">AV1 编码</option>\n        <option value=\"4048\">所有DASH格式</option>\n      </select>\n    </div>\n    \n    <div class=\"form-group\">\n      <label>版本标识 (fnver):</label>\n      <select v-model=\"fnver\">\n        <option value=\"\">默认</option>\n        <option value=\"0\">0</option>\n      </select>\n    </div>\n    \n    <div class=\"form-group\">\n      <label>4K支持 (fourk):</label>\n      <select v-model=\"fourk\">\n        <option value=\"\">默认</option>\n        <option value=\"0\">不支持4K</option>\n        <option value=\"1\">支持4K</option>\n      </select>\n    </div>\n    \n    <button @click=\"getVideoPlayUrl\" :disabled=\"!bvid || !cid\">获取视频流URL</button>\n    \n    <div v-if=\"loading\" class=\"loading\">加载中...</div>\n    \n    <div v-if=\"result\" class=\"result\">\n      <h3>结果:</h3>\n      <pre>{{ JSON.stringify(result, null, 2) }}</pre>\n      \n      <div v-if=\"result.data && result.data.dash\" class=\"stream-info\">\n        <h4>DASH流信息:</h4>\n        <div v-if=\"result.data.dash.video && result.data.dash.video.length > 0\">\n          <h5>视频流:</h5>\n          <ul>\n            <li v-for=\"(video, index) in result.data.dash.video\" :key=\"index\">\n              清晰度: {{ video.id }}, 编码: {{ video.codecs }}, 分辨率: {{ video.width }}x{{ video.height }}, 帧率: {{ video.frameRate }}\n              <br>\n              URL: <a :href=\"video.baseUrl\" target=\"_blank\">{{ video.baseUrl }}</a>\n            </li>\n          </ul>\n        </div>\n        \n        <div v-if=\"result.data.dash.audio && result.data.dash.audio.length > 0\">\n          <h5>音频流:</h5>\n          <ul>\n            <li v-for=\"(audio, index) in result.data.dash.audio\" :key=\"index\">\n              音质: {{ audio.id }}, 编码: {{ audio.codecs }}\n              <br>\n              URL: <a :href=\"audio.baseUrl\" target=\"_blank\">{{ audio.baseUrl }}</a>\n            </li>\n          </ul>\n        </div>\n      </div>\n      \n      <div v-else-if=\"result.data && result.data.durl && result.data.durl.length > 0\" class=\"stream-info\">\n        <h4>MP4/FLV流信息:</h4>\n        <ul>\n          <li v-for=\"(durl, index) in result.data.durl\" :key=\"index\">\n            大小: {{ durl.size }} bytes, 长度: {{ durl.length }} ms\n            <br>\n            URL: <a :href=\"durl.url\" target=\"_blank\">{{ durl.url }}</a>\n            <div v-if=\"durl.backup_url && durl.backup_url.length > 0\">\n              <h6>备用URL:</h6>\n              <ul>\n                <li v-for=\"(backupUrl, backupIndex) in durl.backup_url\" :key=\"backupIndex\">\n                  <a :href=\"backupUrl\" target=\"_blank\">{{ backupUrl }}</a>\n                </li>\n              </ul>\n            </div>\n          </li>\n        </ul>\n      </div>\n    </div>\n    \n    <div v-if=\"error\" class=\"error\">\n      <h3>错误:</h3>\n      <p>{{ error }}</p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getVideoDetail, getVideoPlayUrl } from '@/api/video'\n\nexport default {\n  name: 'VideoStreamTest',\n  data() {\n    return {\n      bvid: '',\n      cid: '',\n      qn: '112',\n      fnval: '4048',\n      fnver: '0',\n      fourk: '1',\n      result: null,\n      error: null,\n      loading: false\n    }\n  },\n  methods: {\n    async getVideoInfo() {\n      if (!this.bvid) {\n        this.error = '请输入BV号'\n        return\n      }\n      \n      this.loading = true\n      this.error = null\n      \n      try {\n        const response = await getVideoDetail(this.bvid)\n        if (response.code === 0 && response.data) {\n          // 获取第一个分P的CID\n          if (response.data.pages && response.data.pages.length > 0) {\n            this.cid = response.data.pages[0].cid.toString()\n          } else {\n            this.cid = response.data.cid.toString()\n          }\n          this.result = response\n        } else {\n          this.error = response.message || '获取视频信息失败'\n        }\n      } catch (err) {\n        this.error = err.message || '获取视频信息失败'\n      } finally {\n        this.loading = false\n      }\n    },\n    \n    async getVideoPlayUrl() {\n      if (!this.bvid || !this.cid) {\n        this.error = '请输入BV号和CID'\n        return\n      }\n      \n      this.loading = true\n      this.result = null\n      this.error = null\n      \n      try {\n        // 构造参数对象，只包含非空值\n        const params = {}\n        if (this.qn) params.qn = this.qn\n        if (this.fnval) params.fnval = this.fnval\n        if (this.fnver) params.fnver = this.fnver\n        if (this.fourk) params.fourk = this.fourk\n        \n        const response = await getVideoPlayUrl(this.bvid, this.cid, params)\n        if (response.code === 0) {\n          this.result = response\n        } else {\n          this.error = response.message || '获取视频流URL失败'\n        }\n      } catch (err) {\n        this.error = err.message || '获取视频流URL失败'\n      } finally {\n        this.loading = false\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.video-stream-test {\n  padding: 20px;\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\n.form-group {\n  margin-bottom: 15px;\n}\n\n.form-group label {\n  display: inline-block;\n  width: 150px;\n  font-weight: bold;\n}\n\n.form-group input,\n.form-group select {\n  width: 300px;\n  padding: 8px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n}\n\n.form-group button {\n  margin-left: 10px;\n  padding: 8px 16px;\n  background-color: #007bff;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n}\n\n.form-group button:disabled {\n  background-color: #ccc;\n  cursor: not-allowed;\n}\n\nbutton {\n  padding: 10px 20px;\n  background-color: #28a745;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 16px;\n}\n\nbutton:disabled {\n  background-color: #ccc;\n  cursor: not-allowed;\n}\n\n.loading {\n  text-align: center;\n  padding: 20px;\n  font-size: 18px;\n}\n\n.result {\n  margin-top: 20px;\n  padding: 15px;\n  background-color: #f8f9fa;\n  border-radius: 4px;\n}\n\n.result h3,\n.result h4,\n.result h5,\n.result h6 {\n  margin-top: 0;\n}\n\n.result pre {\n  background-color: #e9ecef;\n  padding: 10px;\n  border-radius: 4px;\n  overflow-x: auto;\n}\n\n.stream-info ul {\n  list-style-type: none;\n  padding: 0;\n}\n\n.stream-info li {\n  margin-bottom: 10px;\n  padding: 10px;\n  background-color: white;\n  border-radius: 4px;\n  box-shadow: 0 1px 3px rgba(0,0,0,0.1);\n}\n\n.error {\n  margin-top: 20px;\n  padding: 15px;\n  background-color: #f8d7da;\n  color: #721c24;\n  border-radius: 4px;\n}\n</style>"]}]}