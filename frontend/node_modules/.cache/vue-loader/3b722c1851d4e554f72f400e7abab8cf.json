{"remainingRequest":"/Users/tbw/work/btProject/reaction-cut/frontend/node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.5.22_cache-loader@4.1.0_webpack@4.47.0__css-load_f9e102e5cbb5fa5aa7d45569a28cebe6/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tbw/work/btProject/reaction-cut/frontend/src/views/VideoDownload.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/tbw/work/btProject/reaction-cut/frontend/src/views/VideoDownload.vue","mtime":1762088097536},{"path":"/Users/tbw/work/btProject/reaction-cut/frontend/node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js","mtime":1761026713270},{"path":"/Users/tbw/work/btProject/reaction-cut/frontend/node_modules/.pnpm/babel-loader@8.4.1_@babel+core@7.28.5_webpack@4.47.0/node_modules/babel-loader/lib/index.js","mtime":1761026722096},{"path":"/Users/tbw/work/btProject/reaction-cut/frontend/node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js","mtime":1761026713270},{"path":"/Users/tbw/work/btProject/reaction-cut/frontend/node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.5.22_cache-loader@4.1.0_webpack@4.47.0__css-load_f9e102e5cbb5fa5aa7d45569a28cebe6/node_modules/vue-loader/lib/index.js","mtime":1761026704427}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IAogIGRvd25sb2FkVmlkZW8sIAogIGdldERvd25sb2FkU3RhdHVzLCAKICBnZXRQZW5kaW5nRG93bmxvYWRzLCAKICBnZXREb3dubG9hZGluZ0Rvd25sb2FkcywgCiAgZ2V0Q29tcGxldGVkRG93bmxvYWRzLAogIGRlbGV0ZURvd25sb2FkUmVjb3JkCn0gZnJvbSAnQC9hcGkvdmlkZW8nCmltcG9ydCB7IGdldFZpZGVvRGV0YWlsLCBnZXRWaWRlb0RldGFpbEJ5QWlkLCBnZXRWaWRlb1BsYXlVcmwgfSBmcm9tICdAL2FwaS92aWRlbycKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnVmlkZW9Eb3dubG9hZCcsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNlYXJjaElucHV0OiAnJywKICAgICAgc2VhcmNoaW5nOiBmYWxzZSwKICAgICAgdmlkZW9JbmZvOiBudWxsLAogICAgICB2aWRlb1BhcnRzOiBbXSwKICAgICAgc2VsZWN0ZWRQYXJ0czogW10sCiAgICAgIGRvd25sb2FkRGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIGRvd25sb2FkQ29uZmlnOiB7CiAgICAgICAgZG93bmxvYWROYW1lOiAnJywgLy8g5paw5aKe5LiL6L295ZCN56ew6YWN572uCiAgICAgICAgcmVzb2x1dGlvbjogJycsCiAgICAgICAgY29kZWM6ICcnLAogICAgICAgIGZvcm1hdDogJycsCiAgICAgICAgY29udGVudDogJ2F1ZGlvX3ZpZGVvJywKICAgICAgICBkb3dubG9hZFBhdGg6ICcvVXNlcnMvdGJ3L1JlYWN0aW9uL2N1dCcgLy8g6K6+572u6buY6K6k5LiL6L296Lev5b6ECiAgICAgIH0sCiAgICAgIGF2YWlsYWJsZVJlc29sdXRpb25zOiBbXSwKICAgICAgYXZhaWxhYmxlQ29kZWNzOiBbXSwKICAgICAgYXZhaWxhYmxlRm9ybWF0czogW10sCiAgICAgIGRvd25sb2FkVGFza0lkOiBudWxsLAogICAgICBwb2xsaW5nVGltZXI6IG51bGwsCiAgICAgIC8vIFRhYnPnm7jlhbPmlbDmja4KICAgICAgYWN0aXZlTWFpblRhYjogJ3ZpZGVvRG93bmxvYWQnLAogICAgICBhY3RpdmVSZWNvcmRUYWI6ICdwZW5kaW5nJywKICAgICAgcGVuZGluZ0Rvd25sb2FkczogW10sCiAgICAgIGRvd25sb2FkaW5nRG93bmxvYWRzOiBbXSwKICAgICAgY29tcGxldGVkRG93bmxvYWRzOiBbXQogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIC8vIOe7hOS7tuaMgui9veWQjuajgOafpXJlZnMKICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgY29uc29sZS5sb2coJ+e7hOS7tuaMgui9veWujOaIkO+8jOajgOafpXJlZnM6JywgdGhpcy4kcmVmcyk7CiAgICB9KTsKICAgIAogICAgLy8g5Yqg6L295LiL6L296K6w5b2VCiAgICB0aGlzLmxvYWREb3dubG9hZFJlY29yZHMoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOaQnOe0ouinhumikQogICAgYXN5bmMgc2VhcmNoVmlkZW8oKSB7CiAgICAgIGlmICghdGhpcy5zZWFyY2hJbnB1dCkgewogICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn6K+36L6T5YWlQlblj7fmiJbop4bpopHpk77mjqUnKQogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIAogICAgICB0aGlzLnNlYXJjaGluZyA9IHRydWUKICAgICAgdHJ5IHsKICAgICAgICAvLyDku47ovpPlhaXkuK3mj5Dlj5bop4bpopFJRAogICAgICAgIGNvbnN0IHZpZGVvSWQgPSB0aGlzLmV4dHJhY3RWaWRlb0lkRnJvbUlucHV0KHRoaXMuc2VhcmNoSW5wdXQpCiAgICAgICAgCiAgICAgICAgbGV0IHJlc3BvbnNlCiAgICAgICAgaWYgKHZpZGVvSWQuYnZpZCkgewogICAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCBnZXRWaWRlb0RldGFpbCh2aWRlb0lkLmJ2aWQpCiAgICAgICAgfSBlbHNlIGlmICh2aWRlb0lkLmFpZCkgewogICAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCBnZXRWaWRlb0RldGFpbEJ5QWlkKHZpZGVvSWQuYWlkKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+aXoOazleivhuWIq+eahOinhumikUlE5qC85byPJykKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT09IDApIHsKICAgICAgICAgIHRoaXMudmlkZW9JbmZvID0gcmVzcG9uc2UuZGF0YQogICAgICAgICAgLy8g5aSE55CG5YiGUOWIl+ihqAogICAgICAgICAgaWYgKHRoaXMudmlkZW9JbmZvLnBhZ2VzICYmIHRoaXMudmlkZW9JbmZvLnBhZ2VzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgdGhpcy52aWRlb1BhcnRzID0gdGhpcy52aWRlb0luZm8ucGFnZXMubWFwKChwYWdlLCBpbmRleCkgPT4gKHsKICAgICAgICAgICAgICBpZDogcGFnZS5jaWQsCiAgICAgICAgICAgICAgcGFydDogcGFnZS5wYXJ0IHx8IGBQYXJ0ICR7aW5kZXggKyAxfWAsCiAgICAgICAgICAgICAgZHVyYXRpb246IHBhZ2UuZHVyYXRpb24gfHwgMAogICAgICAgICAgICB9KSkKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIOWmguaenOayoeacieWIhlDkv6Hmga/vvIzliJvlu7rkuIDkuKrpu5jorqTliIZQCiAgICAgICAgICAgIHRoaXMudmlkZW9QYXJ0cyA9IFt7CiAgICAgICAgICAgICAgaWQ6IHRoaXMudmlkZW9JbmZvLmNpZCB8fCAwLAogICAgICAgICAgICAgIHBhcnQ6IHRoaXMudmlkZW9JbmZvLnRpdGxlIHx8ICfpu5jorqTliIZQJywKICAgICAgICAgICAgICBkdXJhdGlvbjogdGhpcy52aWRlb0luZm8uZHVyYXRpb24gfHwgMAogICAgICAgICAgICB9XQogICAgICAgICAgfQogICAgICAgICAgCiAgICAgICAgICAvLyDmuIXnqbrlt7LpgInmi6nnmoTliIZQCiAgICAgICAgICB0aGlzLnNlbGVjdGVkUGFydHMgPSBbXQogICAgICAgICAgdGhpcy4kcmVmcy5tdWx0aXBsZVRhYmxlICYmIHRoaXMuJHJlZnMubXVsdGlwbGVUYWJsZS5jbGVhclNlbGVjdGlvbigpCiAgICAgICAgICAKICAgICAgICAgIC8vIOino+aekOWPr+eUqOeahOS4i+i9vemFjee9rgogICAgICAgICAgdGhpcy5wYXJzZUF2YWlsYWJsZVJlc29sdXRpb25zKHJlc3BvbnNlLmRhdGEpCiAgICAgICAgICB0aGlzLnBhcnNlQXZhaWxhYmxlQ29kZWNzKHJlc3BvbnNlLmRhdGEpCiAgICAgICAgICB0aGlzLnBhcnNlQXZhaWxhYmxlRm9ybWF0cyhyZXNwb25zZS5kYXRhKQogICAgICAgICAgCiAgICAgICAgICAvLyDorr7nva7pu5jorqTkuIvovb3phY3nva7vvIjku4XlvZPov5jmsqHmnInorr7nva7pu5jorqTlgLzml7bvvIkKICAgICAgICAgIGlmICghdGhpcy5kb3dubG9hZENvbmZpZy5yZXNvbHV0aW9uICYmIHRoaXMuYXZhaWxhYmxlUmVzb2x1dGlvbnMubGVuZ3RoID4gMCkgewogICAgICAgICAgICB0aGlzLmRvd25sb2FkQ29uZmlnLnJlc29sdXRpb24gPSB0aGlzLmF2YWlsYWJsZVJlc29sdXRpb25zWzBdLnZhbHVlCiAgICAgICAgICB9CiAgICAgICAgICBpZiAoIXRoaXMuZG93bmxvYWRDb25maWcuY29kZWMgJiYgdGhpcy5hdmFpbGFibGVDb2RlY3MubGVuZ3RoID4gMCkgewogICAgICAgICAgICB0aGlzLmRvd25sb2FkQ29uZmlnLmNvZGVjID0gdGhpcy5hdmFpbGFibGVDb2RlY3NbMF0udmFsdWUKICAgICAgICAgIH0KICAgICAgICAgIGlmICghdGhpcy5kb3dubG9hZENvbmZpZy5mb3JtYXQgJiYgdGhpcy5hdmFpbGFibGVGb3JtYXRzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgdGhpcy5kb3dubG9hZENvbmZpZy5mb3JtYXQgPSB0aGlzLmF2YWlsYWJsZUZvcm1hdHNbMF0udmFsdWUKICAgICAgICAgIH0KICAgICAgICAgIAogICAgICAgICAgLy8g6K6+572u6buY6K6k5LiL6L295ZCN56ew5Li66KeG6aKR5qCH6aKYCiAgICAgICAgICBpZiAodGhpcy52aWRlb0luZm8udGl0bGUpIHsKICAgICAgICAgICAgdGhpcy5kb3dubG9hZENvbmZpZy5kb3dubG9hZE5hbWUgPSB0aGlzLnZpZGVvSW5mby50aXRsZQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlc3BvbnNlLm1lc3NhZ2UpCiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+aQnOe0ouWksei0pTogJyArIGVycm9yLm1lc3NhZ2UpCiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgdGhpcy5zZWFyY2hpbmcgPSBmYWxzZQogICAgICB9CiAgICB9LAogICAgCiAgICAvLyDojrflj5bku6PnkIblm77niYdVUkwKICAgIGdldFByb3h5SW1hZ2VVcmwoaW1hZ2VVcmwpIHsKICAgICAgaWYgKCFpbWFnZVVybCkgcmV0dXJuIG51bGwKICAgICAgLy8g5L2/55So5ZCO56uv5Luj55CG5o6l5Y+j5Yqg6L295Zu+54mHCiAgICAgIHJldHVybiBgL2FwaS92aWRlby9wcm94eS1pbWFnZT9pbWFnZVVybD0ke2VuY29kZVVSSUNvbXBvbmVudChpbWFnZVVybCl9YAogICAgfSwKICAgIAogICAgLy8g5LuO6L6T5YWl5Lit5o+Q5Y+W6KeG6aKRSUQKICAgIGV4dHJhY3RWaWRlb0lkRnJvbUlucHV0KGlucHV0KSB7CiAgICAgIC8vIEJW5Y+35qC85byPCiAgICAgIGNvbnN0IGJ2TWF0Y2ggPSBpbnB1dC5tYXRjaCgvQlYoW0EtWmEtejAtOV0rKS8pCiAgICAgIGlmIChidk1hdGNoICYmIGJ2TWF0Y2hbMV0pIHsKICAgICAgICByZXR1cm4geyBidmlkOiAnQlYnICsgYnZNYXRjaFsxXSB9CiAgICAgIH0KICAgICAgCiAgICAgIC8vIOWmguaenOaYr0JW5Y+35qC85byP77yM55u05o6l6L+U5ZueCiAgICAgIGlmICgvXkJWW0EtWmEtejAtOV0rJC8udGVzdChpbnB1dCkpIHsKICAgICAgICByZXR1cm4geyBidmlkOiBpbnB1dCB9CiAgICAgIH0KICAgICAgCiAgICAgIC8vIGFpZOagvOW8jwogICAgICBjb25zdCBhdk1hdGNoID0gaW5wdXQubWF0Y2goL2F2KFxkKykvKSB8fCBpbnB1dC5tYXRjaCgvYWlkPShcZCspLykKICAgICAgaWYgKGF2TWF0Y2ggJiYgYXZNYXRjaFsxXSkgewogICAgICAgIHJldHVybiB7IGFpZDogcGFyc2VJbnQoYXZNYXRjaFsxXSkgfQogICAgICB9CiAgICAgIAogICAgICAvLyDlpoLmnpzmmK/nuq/mlbDlrZfvvIzlvZPkvZxhaWTlpITnkIYKICAgICAgaWYgKC9eXGQrJC8udGVzdChpbnB1dCkpIHsKICAgICAgICByZXR1cm4geyBhaWQ6IHBhcnNlSW50KGlucHV0KSB9CiAgICAgIH0KICAgICAgCiAgICAgIHJldHVybiB7IGJ2aWQ6IG51bGwsIGFpZDogbnVsbCB9CiAgICB9LAogICAgCiAgICAvLyDop6PmnpDlj6/nlKjnmoTliIbovqjnjocKICAgIHBhcnNlQXZhaWxhYmxlUmVzb2x1dGlvbnMoZGF0YSkgewogICAgICB0aGlzLmF2YWlsYWJsZVJlc29sdXRpb25zID0gW10KICAgICAgCiAgICAgIC8vIOS7jkRBU0jop4bpopHmtYHkuK3ojrflj5bliIbovqjnjofkv6Hmga8KICAgICAgaWYgKGRhdGEuZGFzaCAmJiBkYXRhLmRhc2gudmlkZW8gJiYgZGF0YS5kYXNoLnZpZGVvLmxlbmd0aCA+IDApIHsKICAgICAgICBjb25zdCB1bmlxdWVSZXNvbHV0aW9ucyA9IG5ldyBTZXQoKQogICAgICAgIGRhdGEuZGFzaC52aWRlby5mb3JFYWNoKHZpZGVvID0+IHsKICAgICAgICAgIGlmICh2aWRlby5pZCkgewogICAgICAgICAgICB1bmlxdWVSZXNvbHV0aW9ucy5hZGQodmlkZW8uaWQpCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAKICAgICAgICAvLyDlsIbllK/kuIDliIbovqjnjofovazmjaLkuLrpgInpobkKICAgICAgICBBcnJheS5mcm9tKHVuaXF1ZVJlc29sdXRpb25zKS5zb3J0KChhLCBiKSA9PiBiIC0gYSkuZm9yRWFjaChpZCA9PiB7CiAgICAgICAgICBsZXQgbGFiZWwgPSBpZCArICdQJwogICAgICAgICAgLy8g5qC55o2u5bi46KeB55qE5YiG6L6o546HSUTmmKDlsITmoIfnrb4KICAgICAgICAgIHN3aXRjaCAoaWQpIHsKICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICBsYWJlbCA9ICczNjBQIOa1geeVhScKICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICBjYXNlIDMyOgogICAgICAgICAgICAgIGxhYmVsID0gJzQ4MFAg5riF5pmwJwogICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGNhc2UgNjQ6CiAgICAgICAgICAgICAgbGFiZWwgPSAnNzIwUCDpq5jmuIUnCiAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgY2FzZSA3NDoKICAgICAgICAgICAgICBsYWJlbCA9ICc3MjBQNjAg6auY5riFJwogICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGNhc2UgODA6CiAgICAgICAgICAgICAgbGFiZWwgPSAnMTA4MFAg6auY5riFJwogICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGNhc2UgMTEyOgogICAgICAgICAgICAgIGxhYmVsID0gJzEwODBQKyDpq5jnoIHnjocnCiAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgY2FzZSAxMTY6CiAgICAgICAgICAgICAgbGFiZWwgPSAnMTA4MFA2MCDpq5jluKfnjocnCiAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgY2FzZSAxMjA6CiAgICAgICAgICAgICAgbGFiZWwgPSAnNEsg6LaF5riFJwogICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGNhc2UgMTI1OgogICAgICAgICAgICAgIGxhYmVsID0gJ0hEUiDnnJ/lvanoibInCiAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgY2FzZSAxMjY6CiAgICAgICAgICAgICAgbGFiZWwgPSAn5p2c5q+U6KeG55WMJwogICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGNhc2UgMTI3OgogICAgICAgICAgICAgIGxhYmVsID0gJzhLIOi2hemrmOa4hScKICAgICAgICAgICAgICBicmVhawogICAgICAgICAgfQogICAgICAgICAgCiAgICAgICAgICB0aGlzLmF2YWlsYWJsZVJlc29sdXRpb25zLnB1c2goewogICAgICAgICAgICB2YWx1ZTogaWQudG9TdHJpbmcoKSwKICAgICAgICAgICAgbGFiZWw6IGxhYmVsCiAgICAgICAgICB9KQogICAgICAgIH0pCiAgICAgIH0KICAgICAgCiAgICAgIC8vIOWmguaenOS7jeeEtuayoeacieWIhui+qOeOh+S/oeaBr++8jOiuvue9rum7mOiupOWAvAogICAgICBpZiAodGhpcy5hdmFpbGFibGVSZXNvbHV0aW9ucy5sZW5ndGggPT09IDApIHsKICAgICAgICB0aGlzLmF2YWlsYWJsZVJlc29sdXRpb25zID0gWwogICAgICAgICAgeyB2YWx1ZTogJzY0JywgbGFiZWw6ICc3MjBQIOmrmOa4hScgfSwKICAgICAgICAgIHsgdmFsdWU6ICc4MCcsIGxhYmVsOiAnMTA4MFAg6auY5riFJyB9LAogICAgICAgICAgeyB2YWx1ZTogJzExMicsIGxhYmVsOiAnMTA4MFArIOmrmOeggeeOhycgfQogICAgICAgIF0KICAgICAgfQogICAgfSwKICAgIAogICAgLy8g6Kej5p6Q5Y+v55So55qE57yW56CB5qC85byPCiAgICBwYXJzZUF2YWlsYWJsZUNvZGVjcyhkYXRhKSB7CiAgICAgIHRoaXMuYXZhaWxhYmxlQ29kZWNzID0gW10KICAgICAgCiAgICAgIC8vIOS7jkRBU0jop4bpopHmtYHkuK3ojrflj5bnvJbnoIHmoLzlvI/kv6Hmga8KICAgICAgaWYgKGRhdGEuZGFzaCAmJiBkYXRhLmRhc2gudmlkZW8gJiYgZGF0YS5kYXNoLnZpZGVvLmxlbmd0aCA+IDApIHsKICAgICAgICBjb25zdCB1bmlxdWVDb2RlY3MgPSBuZXcgTWFwKCkKICAgICAgICBkYXRhLmRhc2gudmlkZW8uZm9yRWFjaCh2aWRlbyA9PiB7CiAgICAgICAgICBpZiAodmlkZW8uY29kZWNzKSB7CiAgICAgICAgICAgIC8vIOagueaNrmNvZGVjc+WAvOaYoOWwhOWIsOe8lueggeagvOW8j+agh+etvgogICAgICAgICAgICBsZXQgbGFiZWwgPSB2aWRlby5jb2RlY3MKICAgICAgICAgICAgaWYgKHZpZGVvLmNvZGVjcy5pbmNsdWRlcygnYXZjMScpKSB7CiAgICAgICAgICAgICAgbGFiZWwgPSAnSC4yNjQnCiAgICAgICAgICAgIH0gZWxzZSBpZiAodmlkZW8uY29kZWNzLmluY2x1ZGVzKCdoZXYxJykgfHwgdmlkZW8uY29kZWNzLmluY2x1ZGVzKCdodmMxJykpIHsKICAgICAgICAgICAgICBsYWJlbCA9ICdILjI2NScKICAgICAgICAgICAgfSBlbHNlIGlmICh2aWRlby5jb2RlY3MuaW5jbHVkZXMoJ3ZwMDknKSB8fCB2aWRlby5jb2RlY3MuaW5jbHVkZXMoJ3ZwOScpKSB7CiAgICAgICAgICAgICAgbGFiZWwgPSAnVlA5JwogICAgICAgICAgICB9IGVsc2UgaWYgKHZpZGVvLmNvZGVjcy5pbmNsdWRlcygnYXYwMScpKSB7CiAgICAgICAgICAgICAgbGFiZWwgPSAnQVYxJwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyDkvb/nlKhNYXDnoa7kv53llK/kuIDmgKfvvIzpgb/lhY3ph43lpI0KICAgICAgICAgICAgLy8g5L+u5aSN77ya55u05o6l5L2/55SodmlkZW8uY29kZWNz5L2c5Li66ZSuCiAgICAgICAgICAgIGNvbnN0IGtleSA9IHZpZGVvLmNvZGVjcwogICAgICAgICAgICB1bmlxdWVDb2RlY3Muc2V0KGtleSwgewogICAgICAgICAgICAgIHZhbHVlOiB2aWRlby5jb2RlY3MsCiAgICAgICAgICAgICAgbGFiZWw6IGxhYmVsCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAKICAgICAgICB0aGlzLmF2YWlsYWJsZUNvZGVjcyA9IEFycmF5LmZyb20odW5pcXVlQ29kZWNzLnZhbHVlcygpKQogICAgICB9CiAgICAgIAogICAgICAvLyDlpoLmnpzmsqHmnInnvJbnoIHmoLzlvI/kv6Hmga/vvIzorr7nva7pu5jorqTlgLwKICAgICAgaWYgKHRoaXMuYXZhaWxhYmxlQ29kZWNzLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHRoaXMuYXZhaWxhYmxlQ29kZWNzID0gWwogICAgICAgICAgeyB2YWx1ZTogJ2gyNjQnLCBsYWJlbDogJ0guMjY0JyB9LAogICAgICAgICAgeyB2YWx1ZTogJ2gyNjUnLCBsYWJlbDogJ0guMjY1JyB9LAogICAgICAgICAgeyB2YWx1ZTogJ3ZwOScsIGxhYmVsOiAnVlA5JyB9CiAgICAgICAgXQogICAgICB9CiAgICB9LAogICAgCiAgICAvLyDop6PmnpDlj6/nlKjnmoTmtYHlqpLkvZPmoLzlvI8KICAgIHBhcnNlQXZhaWxhYmxlRm9ybWF0cyhkYXRhKSB7CiAgICAgIHRoaXMuYXZhaWxhYmxlRm9ybWF0cyA9IFtdCiAgICAgIAogICAgICAvLyDmoLnmja7ov5Tlm57nmoTmlbDmja7liKTmlq3mlK/mjIHnmoTmoLzlvI8KICAgICAgaWYgKGRhdGEuZGFzaCkgewogICAgICAgIHRoaXMuYXZhaWxhYmxlRm9ybWF0cy5wdXNoKHsgdmFsdWU6ICdkYXNoJywgbGFiZWw6ICdEQVNIJyB9KQogICAgICB9CiAgICAgIAogICAgICBpZiAoZGF0YS5kdXJsKSB7CiAgICAgICAgdGhpcy5hdmFpbGFibGVGb3JtYXRzLnB1c2goeyB2YWx1ZTogJ21wNCcsIGxhYmVsOiAnTVA0JyB9KQogICAgICB9CiAgICAgIAogICAgICAvLyDlpoLmnpzmsqHmnInmoLzlvI/kv6Hmga/vvIzorr7nva7pu5jorqTlgLwKICAgICAgaWYgKHRoaXMuYXZhaWxhYmxlRm9ybWF0cy5sZW5ndGggPT09IDApIHsKICAgICAgICB0aGlzLmF2YWlsYWJsZUZvcm1hdHMgPSBbCiAgICAgICAgICB7IHZhbHVlOiAnZGFzaCcsIGxhYmVsOiAnREFTSCcgfSwKICAgICAgICAgIHsgdmFsdWU6ICdtcDQnLCBsYWJlbDogJ01QNCcgfQogICAgICAgIF0KICAgICAgfQogICAgfSwKICAgIAogICAgLy8g6K6+572u6buY6K6k5LiL6L296YWN572uCiAgICBzZXREZWZhdWx0RG93bmxvYWRDb25maWdzKCkgewogICAgICB0aGlzLmF2YWlsYWJsZVJlc29sdXRpb25zID0gWwogICAgICAgIHsgdmFsdWU6ICc2NCcsIGxhYmVsOiAnNzIwUCDpq5jmuIUnIH0sCiAgICAgICAgeyB2YWx1ZTogJzgwJywgbGFiZWw6ICcxMDgwUCDpq5jmuIUnIH0sCiAgICAgICAgeyB2YWx1ZTogJzExMicsIGxhYmVsOiAnMTA4MFArIOmrmOeggeeOhycgfQogICAgICBdCiAgICAgIAogICAgICB0aGlzLmF2YWlsYWJsZUNvZGVjcyA9IFsKICAgICAgICB7IHZhbHVlOiAnaDI2NCcsIGxhYmVsOiAnSC4yNjQnIH0sCiAgICAgICAgeyB2YWx1ZTogJ2gyNjUnLCBsYWJlbDogJ0guMjY1JyB9LAogICAgICAgIHsgdmFsdWU6ICd2cDknLCBsYWJlbDogJ1ZQOScgfQogICAgICBdCiAgICAgIAogICAgICB0aGlzLmF2YWlsYWJsZUZvcm1hdHMgPSBbCiAgICAgICAgeyB2YWx1ZTogJ2Rhc2gnLCBsYWJlbDogJ0RBU0gnIH0sCiAgICAgICAgeyB2YWx1ZTogJ21wNCcsIGxhYmVsOiAnTVA0JyB9CiAgICAgIF0KICAgICAgCiAgICAgIC8vIOiuvue9rum7mOiupOWAvAogICAgICB0aGlzLmRvd25sb2FkQ29uZmlnLnJlc29sdXRpb24gPSAnNjQnCiAgICAgIHRoaXMuZG93bmxvYWRDb25maWcuY29kZWMgPSAnaDI2NCcKICAgICAgdGhpcy5kb3dubG9hZENvbmZpZy5mb3JtYXQgPSAnZGFzaCcKICAgIH0sCiAgICAKICAgIC8vIOWkhOeQhumAieaLqeWPmOWMlgogICAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKHNlbGVjdGlvbikgewogICAgICB0aGlzLnNlbGVjdGVkUGFydHMgPSBzZWxlY3Rpb24KICAgIH0sCiAgICAKICAgIC8vIOWFqOmAiS/lj5bmtojlhajpgIkKICAgIHRvZ2dsZVNlbGVjdEFsbCgpIHsKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRQYXJ0cy5sZW5ndGggPT09IHRoaXMudmlkZW9QYXJ0cy5sZW5ndGgpIHsKICAgICAgICAvLyDlj5bmtojlhajpgIkKICAgICAgICB0aGlzLiRyZWZzLm11bHRpcGxlVGFibGUuY2xlYXJTZWxlY3Rpb24oKQogICAgICB9IGVsc2UgewogICAgICAgIC8vIOWFqOmAiQogICAgICAgIHRoaXMudmlkZW9QYXJ0cy5mb3JFYWNoKHJvdyA9PiB7CiAgICAgICAgICB0aGlzLiRyZWZzLm11bHRpcGxlVGFibGUudG9nZ2xlUm93U2VsZWN0aW9uKHJvdywgdHJ1ZSkKICAgICAgICB9KQogICAgICB9CiAgICB9LAogICAgCiAgICAvLyDmmL7npLrkuIvovb3lr7nor53moYYKICAgIHNob3dEb3dubG9hZERpYWxvZygpIHsKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRQYXJ0cy5sZW5ndGggPT09IDApIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+ivt+iHs+WwkemAieaLqeS4gOS4quWIhlAnKQogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIHRoaXMuZG93bmxvYWREaWFsb2dWaXNpYmxlID0gdHJ1ZQogICAgICAKICAgICAgLy8g56Gu5L+dRE9N5pu05paw5ZCO5YaN5qOA5p+lcmVmcwogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coJ+WvueivneahhuaJk+W8gOWQjuajgOafpXJlZnM6JywgdGhpcy4kcmVmcyk7CiAgICAgIH0pOwogICAgfSwKICAgIAogICAgLy8g5byA5aeL5LiL6L29CiAgICBhc3luYyBzdGFydERvd25sb2FkKCkgewogICAgICB0cnkgewogICAgICAgIC8vIOaehOmAoOS4i+i9veWPguaVsAogICAgICAgIGNvbnN0IGRvd25sb2FkUGFyYW1zID0gewogICAgICAgICAgdmlkZW9Vcmw6IGBodHRwczovL3d3dy5iaWxpYmlsaS5jb20vdmlkZW8vJHt0aGlzLnZpZGVvSW5mby5idmlkfWAsCiAgICAgICAgICBwYXJ0czogdGhpcy5zZWxlY3RlZFBhcnRzLm1hcChwYXJ0ID0+ICh7CiAgICAgICAgICAgIGNpZDogcGFydC5pZCwKICAgICAgICAgICAgdGl0bGU6IHBhcnQucGFydAogICAgICAgICAgfSkpLAogICAgICAgICAgY29uZmlnOiB0aGlzLmRvd25sb2FkQ29uZmlnCiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIOiwg+eUqOS4i+i9vUFQSQogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZG93bmxvYWRWaWRlbyhkb3dubG9hZFBhcmFtcykKICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PT0gMCkgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfkuIvovb3ku7vliqHlt7LliJvlu7onKQogICAgICAgICAgdGhpcy5kb3dubG9hZFRhc2tJZCA9IHJlc3BvbnNlLmRhdGEKICAgICAgICAgIHRoaXMuZG93bmxvYWREaWFsb2dWaXNpYmxlID0gZmFsc2UKICAgICAgICAgIAogICAgICAgICAgLy8g6YeN5paw5Yqg6L295LiL6L296K6w5b2VCiAgICAgICAgICB0aGlzLmxvYWREb3dubG9hZFJlY29yZHMoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXNwb25zZS5tZXNzYWdlKQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfkuIvovb3lpLHotKU6ICcgKyBlcnJvci5tZXNzYWdlKQogICAgICB9CiAgICB9LAogICAgCiAgICAvLyDmoLzlvI/ljJbmlbDlrZcKICAgIGZvcm1hdE51bWJlcihudW0pIHsKICAgICAgaWYgKG51bSA+PSAxMDAwMCkgewogICAgICAgIHJldHVybiAobnVtIC8gMTAwMDApLnRvRml4ZWQoMSkgKyAn5LiHJwogICAgICB9CiAgICAgIHJldHVybiBudW0KICAgIH0sCiAgICAKICAgIC8vIOagvOW8j+WMluaXtumVvwogICAgZm9ybWF0RHVyYXRpb24oc2Vjb25kcykgewogICAgICBjb25zdCBob3VycyA9IE1hdGguZmxvb3Ioc2Vjb25kcyAvIDM2MDApCiAgICAgIGNvbnN0IG1pbnV0ZXMgPSBNYXRoLmZsb29yKChzZWNvbmRzICUgMzYwMCkgLyA2MCkKICAgICAgY29uc3Qgc2VjcyA9IHNlY29uZHMgJSA2MAogICAgICAKICAgICAgaWYgKGhvdXJzID4gMCkgewogICAgICAgIHJldHVybiBgJHtob3Vyc306JHttaW51dGVzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX06JHtzZWNzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX1gCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGAke21pbnV0ZXN9OiR7c2Vjcy50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9YAogICAgICB9CiAgICB9LAogICAgCiAgICAvLyDojrflj5bpu5jorqTlsIHpnaIKICAgIGdldERlZmF1bHRDb3ZlcigpIHsKICAgICAgcmV0dXJuICdodHRwczovL2kwLmhkc2xiLmNvbS9iZnMvYXJjaGl2ZS81MjQyNzUwODU3MTIxZTA1MTQ2ZDVkMWI1NTc0OTEzYmFkNDQxMGY3LmpwZycKICAgIH0sCiAgICAKICAgIC8vIOiOt+WPlum7mOiupOWktOWDjwogICAgZ2V0RGVmYXVsdEF2YXRhcigpIHsKICAgICAgcmV0dXJuICdodHRwczovL2kwLmhkc2xiLmNvbS9iZnMvZmFjZS9tZW1iZXIvbm9mYWNlLmpwZycKICAgIH0sCiAgICAKICAgIC8vIOWkhOeQhuWwgemdouWKoOi9vemUmeivrwogICAgaGFuZGxlQ292ZXJFcnJvcihlKSB7CiAgICAgIGUudGFyZ2V0LnNyYyA9IHRoaXMuZ2V0RGVmYXVsdENvdmVyKCkKICAgIH0sCiAgICAKICAgIC8vIOWkhOeQhuWktOWDj+WKoOi9vemUmeivrwogICAgaGFuZGxlQXZhdGFyRXJyb3IoZSkgewogICAgICBlLnRhcmdldC5zcmMgPSB0aGlzLmdldERlZmF1bHRBdmF0YXIoKQogICAgfSwKICAgIAogICAgLy8g5qC85byP5YyW5pe26Ze0CiAgICBmb3JtYXRUaW1lKHRpbWUpIHsKICAgICAgaWYgKCF0aW1lKSByZXR1cm4gJycKICAgICAgcmV0dXJuIG5ldyBEYXRlKHRpbWUpLnRvTG9jYWxlU3RyaW5nKCd6aC1DTicpCiAgICB9LAogICAgCiAgICAvLyDliqDovb3kuIvovb3orrDlvZUKICAgIGFzeW5jIGxvYWREb3dubG9hZFJlY29yZHMoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgLy8g5Yqg6L295b6F5LiL6L295Lu75YqhCiAgICAgICAgY29uc3QgcGVuZGluZ1Jlc3BvbnNlID0gYXdhaXQgZ2V0UGVuZGluZ0Rvd25sb2FkcygpCiAgICAgICAgaWYgKHBlbmRpbmdSZXNwb25zZS5jb2RlID09PSAwKSB7CiAgICAgICAgICB0aGlzLnBlbmRpbmdEb3dubG9hZHMgPSBwZW5kaW5nUmVzcG9uc2UuZGF0YSB8fCBbXQogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyDliqDovb3kuIvovb3kuK3ku7vliqEKICAgICAgICBjb25zdCBkb3dubG9hZGluZ1Jlc3BvbnNlID0gYXdhaXQgZ2V0RG93bmxvYWRpbmdEb3dubG9hZHMoKQogICAgICAgIGlmIChkb3dubG9hZGluZ1Jlc3BvbnNlLmNvZGUgPT09IDApIHsKICAgICAgICAgIHRoaXMuZG93bmxvYWRpbmdEb3dubG9hZHMgPSBkb3dubG9hZGluZ1Jlc3BvbnNlLmRhdGEgfHwgW10KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy8g5Yqg6L295bey5a6M5oiQ5Lu75YqhCiAgICAgICAgY29uc3QgY29tcGxldGVkUmVzcG9uc2UgPSBhd2FpdCBnZXRDb21wbGV0ZWREb3dubG9hZHMoKQogICAgICAgIGlmIChjb21wbGV0ZWRSZXNwb25zZS5jb2RlID09PSAwKSB7CiAgICAgICAgICB0aGlzLmNvbXBsZXRlZERvd25sb2FkcyA9IGNvbXBsZXRlZFJlc3BvbnNlLmRhdGEgfHwgW10KICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign5Yqg6L295LiL6L296K6w5b2V5aSx6LSlOicsIGVycm9yKQogICAgICB9CiAgICB9LAogICAgCiAgICAvLyDliKDpmaTkuIvovb3orrDlvZUKICAgIGFzeW5jIGRlbGV0ZURvd25sb2FkUmVjb3JkKHRhc2tJZCkgewogICAgICB0cnkgewogICAgICAgIGF3YWl0IGRlbGV0ZURvd25sb2FkUmVjb3JkKHRhc2tJZCkKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WIoOmZpOaIkOWKnycpCiAgICAgICAgLy8g6YeN5paw5Yqg6L295LiL6L296K6w5b2VCiAgICAgICAgdGhpcy5sb2FkRG93bmxvYWRSZWNvcmRzKCkKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfliKDpmaTlpLHotKU6ICcgKyBlcnJvci5tZXNzYWdlKQogICAgICB9CiAgICB9LAogICAgCiAgICAvLyDlpITnkIbkuLvmoIfnrb7pobXngrnlh7sKICAgIGhhbmRsZU1haW5UYWJDbGljayh0YWIpIHsKICAgICAgaWYgKHRhYi5uYW1lID09PSAnZG93bmxvYWRSZWNvcmQnKSB7CiAgICAgICAgLy8g5YiH5o2i5Yiw5LiL6L296K6w5b2V5qCH562+6aG15pe277yM5Yi35paw5pWw5o2uCiAgICAgICAgdGhpcy5sb2FkRG93bmxvYWRSZWNvcmRzKCkKICAgICAgfQogICAgfSwKICAgIAogICAgLy8g5aSE55CG6K6w5b2V5qCH562+6aG154K55Ye7CiAgICBoYW5kbGVSZWNvcmRUYWJDbGljayh0YWIpIHsKICAgICAgLy8g5q+P5qyh5YiH5o2i6K6w5b2V5qCH562+6aG15pe26YO95Yi35paw5a+55bqU55qE5pWw5o2uCiAgICAgIHN3aXRjaCAodGFiLm5hbWUpIHsKICAgICAgICBjYXNlICdwZW5kaW5nJzoKICAgICAgICAgIHRoaXMubG9hZFBlbmRpbmdEb3dubG9hZHMoKQogICAgICAgICAgYnJlYWsKICAgICAgICBjYXNlICdkb3dubG9hZGluZyc6CiAgICAgICAgICB0aGlzLmxvYWREb3dubG9hZGluZ0Rvd25sb2FkcygpCiAgICAgICAgICBicmVhawogICAgICAgIGNhc2UgJ2NvbXBsZXRlZCc6CiAgICAgICAgICB0aGlzLmxvYWRDb21wbGV0ZWREb3dubG9hZHMoKQogICAgICAgICAgYnJlYWsKICAgICAgfQogICAgfSwKICAgIAogICAgLy8g5Yqg6L295b6F5LiL6L295Lu75YqhCiAgICBhc3luYyBsb2FkUGVuZGluZ0Rvd25sb2FkcygpIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdldFBlbmRpbmdEb3dubG9hZHMoKQogICAgICAgIGlmIChyZXNwb25zZS5jb2RlID09PSAwKSB7CiAgICAgICAgICB0aGlzLnBlbmRpbmdEb3dubG9hZHMgPSByZXNwb25zZS5kYXRhIHx8IFtdCiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+WKoOi9veW+heS4i+i9veS7u+WKoeWksei0pTonLCBlcnJvcikKICAgICAgfQogICAgfSwKICAgIAogICAgLy8g5Yqg6L295LiL6L295Lit5Lu75YqhCiAgICBhc3luYyBsb2FkRG93bmxvYWRpbmdEb3dubG9hZHMoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnZXREb3dubG9hZGluZ0Rvd25sb2FkcygpCiAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT09IDApIHsKICAgICAgICAgIHRoaXMuZG93bmxvYWRpbmdEb3dubG9hZHMgPSByZXNwb25zZS5kYXRhIHx8IFtdCiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+WKoOi9veS4i+i9veS4reS7u+WKoeWksei0pTonLCBlcnJvcikKICAgICAgfQogICAgfSwKICAgIAogICAgLy8g5Yqg6L295bey5a6M5oiQ5Lu75YqhCiAgICBhc3luYyBsb2FkQ29tcGxldGVkRG93bmxvYWRzKCkgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ2V0Q29tcGxldGVkRG93bmxvYWRzKCkKICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PT0gMCkgewogICAgICAgICAgdGhpcy5jb21wbGV0ZWREb3dubG9hZHMgPSByZXNwb25zZS5kYXRhIHx8IFtdCiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+WKoOi9veW3suWujOaIkOS7u+WKoeWksei0pTonLCBlcnJvcikKICAgICAgfQogICAgfQogIH0KfQo="},{"version":3,"sources":["VideoDownload.vue"],"names":[],"mappings":";AAiVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"VideoDownload.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"video-download\">\n    <h2>视频下载</h2>\n    \n    <!-- 主Tabs -->\n    <el-tabs v-model=\"activeMainTab\" type=\"card\" @tab-click=\"handleMainTabClick\">\n      <!-- 视频下载Tab -->\n      <el-tab-pane label=\"视频下载\" name=\"videoDownload\">\n        <!-- 搜索区域 -->\n        <el-card class=\"search-card\">\n          <div slot=\"header\">\n            <span>搜索视频</span>\n          </div>\n          <el-row :gutter=\"20\">\n            <el-col :span=\"18\">\n              <el-input \n                v-model=\"searchInput\" \n                placeholder=\"请输入BV号或视频链接\"\n                size=\"large\"\n                @keyup.enter.native=\"searchVideo\"\n              >\n                <i slot=\"prefix\" class=\"el-input__icon el-icon-search\"></i>\n              </el-input>\n            </el-col>\n            <el-col :span=\"6\">\n              <el-button \n                type=\"primary\" \n                size=\"large\" \n                @click=\"searchVideo\"\n                :loading=\"searching\"\n                style=\"width: 100%\"\n              >\n                搜索\n              </el-button>\n            </el-col>\n          </el-row>\n        </el-card>\n        \n        <!-- 视频信息展示 -->\n        <el-card class=\"video-info-card\" v-if=\"videoInfo\">\n          <div class=\"video-header\">\n            <div class=\"video-cover\">\n              <img \n                :src=\"getProxyImageUrl(videoInfo.pic) || getDefaultCover()\" \n                alt=\"视频封面\" \n                class=\"cover-img\"\n                @error=\"handleCoverError\"\n              >\n            </div>\n            <div class=\"video-details\">\n              <div class=\"video-title\">{{ videoInfo.title }}</div>\n              <div class=\"video-stats\">\n                <span class=\"stat-item\">播放: {{ formatNumber(videoInfo.stat.view) }}</span>\n                <span class=\"stat-item\">弹幕: {{ formatNumber(videoInfo.stat.danmaku) }}</span>\n                <span class=\"stat-item\">评论: {{ formatNumber(videoInfo.stat.reply) }}</span>\n                <span class=\"stat-item\">收藏: {{ formatNumber(videoInfo.stat.favorite) }}</span>\n                <span class=\"stat-item\">投币: {{ formatNumber(videoInfo.stat.coin) }}</span>\n                <span class=\"stat-item\">点赞: {{ formatNumber(videoInfo.stat.like) }}</span>\n                <span class=\"stat-item\">分享: {{ formatNumber(videoInfo.stat.share) }}</span>\n              </div>\n              <div class=\"video-desc\">{{ videoInfo.desc }}</div>\n            </div>\n            <div class=\"uploader-info\">\n              <img \n                :src=\"getProxyImageUrl(videoInfo.owner.face) || getDefaultAvatar()\" \n                alt=\"UP主头像\" \n                class=\"uploader-avatar\"\n                @error=\"handleAvatarError\"\n              >\n              <div class=\"uploader-name\">{{ videoInfo.owner.name }}</div>\n            </div>\n          </div>\n          \n          <!-- 分P列表 -->\n          <div class=\"video-parts\">\n            <div class=\"parts-header\">\n              <div class=\"parts-title\">分P列表 (共{{ videoParts.length }}个)</div>\n              <div class=\"parts-actions\">\n                <el-button \n                  size=\"small\" \n                  @click=\"toggleSelectAll\"\n                >\n                  {{ selectedParts.length === videoParts.length ? '取消全选' : '全选' }}\n                </el-button>\n                <el-button \n                  type=\"primary\" \n                  size=\"small\" \n                  @click=\"showDownloadDialog\"\n                  :disabled=\"selectedParts.length === 0\"\n                >\n                  常规下载\n                </el-button>\n              </div>\n            </div>\n            \n            <el-table \n              :data=\"videoParts\" \n              style=\"width: 100%\" \n              @selection-change=\"handleSelectionChange\"\n              ref=\"multipleTable\"\n            >\n              <el-table-column type=\"selection\" width=\"55\"></el-table-column>\n              <el-table-column prop=\"part\" label=\"分P标题\"></el-table-column>\n              <el-table-column prop=\"duration\" label=\"时长\" width=\"120\">\n                <template slot-scope=\"scope\">\n                  {{ formatDuration(scope.row.duration) }}\n                </template>\n              </el-table-column>\n            </el-table>\n          </div>\n        </el-card>\n        \n        <!-- 下载配置弹窗 -->\n        <el-dialog\n          title=\"下载配置\"\n          :visible.sync=\"downloadDialogVisible\"\n          width=\"500px\"\n        >\n          <el-form :model=\"downloadConfig\" label-width=\"100px\">\n            <el-form-item label=\"下载名称\">\n              <el-input \n                v-model=\"downloadConfig.downloadName\" \n                placeholder=\"请输入下载文件夹名称\"\n              ></el-input>\n              <div style=\"font-size: 12px; color: #999; margin-top: 5px;\">\n                用于指定下载视频的主文件夹名称\n              </div>\n            </el-form-item>\n            <el-form-item label=\"分辨率\">\n              <el-select v-model=\"downloadConfig.resolution\" placeholder=\"请选择分辨率\">\n                <el-option \n                  v-for=\"resolution in availableResolutions\" \n                  :key=\"resolution.value\" \n                  :label=\"resolution.label\" \n                  :value=\"resolution.value\">\n                </el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item label=\"编码格式\">\n              <el-select v-model=\"downloadConfig.codec\" placeholder=\"请选择编码格式\">\n                <el-option \n                  v-for=\"codec in availableCodecs\" \n                  :key=\"codec.value\" \n                  :label=\"codec.label\" \n                  :value=\"codec.value\">\n                </el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item label=\"流媒体格式\">\n              <el-select v-model=\"downloadConfig.format\" placeholder=\"请选择格式\">\n                <el-option \n                  v-for=\"format in availableFormats\" \n                  :key=\"format.value\" \n                  :label=\"format.label\" \n                  :value=\"format.value\">\n                </el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item label=\"下载内容\">\n              <el-select v-model=\"downloadConfig.content\" placeholder=\"请选择下载内容\">\n                <el-option label=\"音视频\" value=\"audio_video\"></el-option>\n                <el-option label=\"仅视频\" value=\"video_only\"></el-option>\n                <el-option label=\"仅音频\" value=\"audio_only\"></el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item label=\"下载路径\">\n              <el-input v-model=\"downloadConfig.downloadPath\" placeholder=\"请输入下载路径\">\n              </el-input>\n              <div style=\"font-size: 12px; color: #999; margin-top: 5px;\">\n                默认路径: /Users/tbw/Reaction/cut\n              </div>\n            </el-form-item>\n          </el-form>\n          <span slot=\"footer\" class=\"dialog-footer\">\n            <el-button @click=\"downloadDialogVisible = false\">取 消</el-button>\n            <el-button type=\"primary\" @click=\"startDownload\">确 定</el-button>\n          </span>\n        </el-dialog>\n      </el-tab-pane>\n      \n      <!-- 下载记录Tab -->\n      <el-tab-pane label=\"下载记录\" name=\"downloadRecord\">\n        <el-tabs v-model=\"activeRecordTab\" type=\"card\" @tab-click=\"handleRecordTabClick\">\n          <el-tab-pane label=\"待下载\" name=\"pending\">\n            <div class=\"download-list\">\n              <el-card \n                v-for=\"item in pendingDownloads\" \n                :key=\"item.id\" \n                class=\"download-item\"\n              >\n                <div class=\"download-item-content\">\n                  <div class=\"item-header\">\n                    <div class=\"part-title\">{{ item.partTitle || '未知分P' }}</div>\n                    <div class=\"item-actions\">\n                      <el-button \n                        type=\"danger\" \n                        size=\"mini\" \n                        icon=\"el-icon-delete\" \n                        @click=\"deleteDownloadRecord(item.id)\"\n                      >\n                        删除\n                      </el-button>\n                    </div>\n                  </div>\n                  <div class=\"item-config\">\n                    <div class=\"config-item\">\n                      <span class=\"config-label\">分辨率:</span>\n                      <span class=\"config-value\">{{ item.resolution || '未知' }}</span>\n                    </div>\n                    <div class=\"config-item\">\n                      <span class=\"config-label\">编码格式:</span>\n                      <span class=\"config-value\">{{ item.codec || '未知' }}</span>\n                    </div>\n                    <div class=\"config-item\">\n                      <span class=\"config-label\">流媒体格式:</span>\n                      <span class=\"config-value\">{{ item.format || '未知' }}</span>\n                    </div>\n                  </div>\n                  <div class=\"item-progress\">\n                    <el-progress :percentage=\"item.progress || 0\"></el-progress>\n                  </div>\n                  <div class=\"item-time\">\n                    创建时间: {{ formatTime(item.createTime) }}\n                  </div>\n                </div>\n              </el-card>\n              <div v-if=\"pendingDownloads.length === 0\" class=\"no-data\">\n                暂无待下载任务\n              </div>\n            </div>\n          </el-tab-pane>\n          <el-tab-pane label=\"下载中\" name=\"downloading\">\n            <div class=\"download-list\">\n              <el-card \n                v-for=\"item in downloadingDownloads\" \n                :key=\"item.id\" \n                class=\"download-item\"\n              >\n                <div class=\"download-item-content\">\n                  <div class=\"item-header\">\n                    <div class=\"part-title\">{{ item.partTitle || '未知分P' }}</div>\n                    <div class=\"item-actions\">\n                      <el-button \n                        type=\"danger\" \n                        size=\"mini\" \n                        icon=\"el-icon-delete\" \n                        @click=\"deleteDownloadRecord(item.id)\"\n                      >\n                        删除\n                      </el-button>\n                    </div>\n                  </div>\n                  <div class=\"item-config\">\n                    <div class=\"config-item\">\n                      <span class=\"config-label\">分辨率:</span>\n                      <span class=\"config-value\">{{ item.resolution || '未知' }}</span>\n                    </div>\n                    <div class=\"config-item\">\n                      <span class=\"config-label\">编码格式:</span>\n                      <span class=\"config-value\">{{ item.codec || '未知' }}</span>\n                    </div>\n                    <div class=\"config-item\">\n                      <span class=\"config-label\">流媒体格式:</span>\n                      <span class=\"config-value\">{{ item.format || '未知' }}</span>\n                    </div>\n                  </div>\n                  <div class=\"item-progress\">\n                    <el-progress :percentage=\"item.progress || 0\"></el-progress>\n                  </div>\n                  <div class=\"item-time\">\n                    创建时间: {{ formatTime(item.createTime) }}\n                  </div>\n                </div>\n              </el-card>\n              <div v-if=\"downloadingDownloads.length === 0\" class=\"no-data\">\n                暂无下载中任务\n              </div>\n            </div>\n          </el-tab-pane>\n          <el-tab-pane label=\"已下载\" name=\"completed\">\n            <div class=\"download-list\">\n              <el-card \n                v-for=\"item in completedDownloads\" \n                :key=\"item.id\" \n                class=\"download-item\"\n              >\n                <div class=\"download-item-content\">\n                  <div class=\"item-header\">\n                    <div class=\"part-title\">{{ item.partTitle || '未知分P' }}</div>\n                    <div class=\"item-actions\">\n                      <el-button \n                        type=\"danger\" \n                        size=\"mini\" \n                        icon=\"el-icon-delete\" \n                        @click=\"deleteDownloadRecord(item.id)\"\n                      >\n                        删除\n                      </el-button>\n                    </div>\n                  </div>\n                  <div class=\"item-config\">\n                    <div class=\"config-item\">\n                      <span class=\"config-label\">分辨率:</span>\n                      <span class=\"config-value\">{{ item.resolution || '未知' }}</span>\n                    </div>\n                    <div class=\"config-item\">\n                      <span class=\"config-label\">编码格式:</span>\n                      <span class=\"config-value\">{{ item.codec || '未知' }}</span>\n                    </div>\n                    <div class=\"config-item\">\n                      <span class=\"config-label\">流媒体格式:</span>\n                      <span class=\"config-value\">{{ item.format || '未知' }}</span>\n                    </div>\n                  </div>\n                  <div class=\"item-progress\">\n                    <el-progress \n                      :percentage=\"item.progress || 0\" \n                      :status=\"item.status === 2 ? 'success' : 'exception'\"\n                    ></el-progress>\n                  </div>\n                  <div class=\"item-time\">\n                    创建时间: {{ formatTime(item.createTime) }}\n                  </div>\n                </div>\n              </el-card>\n              <div v-if=\"completedDownloads.length === 0\" class=\"no-data\">\n                暂无已完成下载任务\n              </div>\n            </div>\n          </el-tab-pane>\n        </el-tabs>\n      </el-tab-pane>\n    </el-tabs>\n  </div>\n</template>\n\n<script>\nimport { \n  downloadVideo, \n  getDownloadStatus, \n  getPendingDownloads, \n  getDownloadingDownloads, \n  getCompletedDownloads,\n  deleteDownloadRecord\n} from '@/api/video'\nimport { getVideoDetail, getVideoDetailByAid, getVideoPlayUrl } from '@/api/video'\n\nexport default {\n  name: 'VideoDownload',\n  data() {\n    return {\n      searchInput: '',\n      searching: false,\n      videoInfo: null,\n      videoParts: [],\n      selectedParts: [],\n      downloadDialogVisible: false,\n      downloadConfig: {\n        downloadName: '', // 新增下载名称配置\n        resolution: '',\n        codec: '',\n        format: '',\n        content: 'audio_video',\n        downloadPath: '/Users/tbw/Reaction/cut' // 设置默认下载路径\n      },\n      availableResolutions: [],\n      availableCodecs: [],\n      availableFormats: [],\n      downloadTaskId: null,\n      pollingTimer: null,\n      // Tabs相关数据\n      activeMainTab: 'videoDownload',\n      activeRecordTab: 'pending',\n      pendingDownloads: [],\n      downloadingDownloads: [],\n      completedDownloads: []\n    }\n  },\n  mounted() {\n    // 组件挂载后检查refs\n    this.$nextTick(() => {\n      console.log('组件挂载完成，检查refs:', this.$refs);\n    });\n    \n    // 加载下载记录\n    this.loadDownloadRecords();\n  },\n  methods: {\n    // 搜索视频\n    async searchVideo() {\n      if (!this.searchInput) {\n        this.$message.warning('请输入BV号或视频链接')\n        return\n      }\n      \n      this.searching = true\n      try {\n        // 从输入中提取视频ID\n        const videoId = this.extractVideoIdFromInput(this.searchInput)\n        \n        let response\n        if (videoId.bvid) {\n          response = await getVideoDetail(videoId.bvid)\n        } else if (videoId.aid) {\n          response = await getVideoDetailByAid(videoId.aid)\n        } else {\n          throw new Error('无法识别的视频ID格式')\n        }\n        \n        if (response.code === 0) {\n          this.videoInfo = response.data\n          // 处理分P列表\n          if (this.videoInfo.pages && this.videoInfo.pages.length > 0) {\n            this.videoParts = this.videoInfo.pages.map((page, index) => ({\n              id: page.cid,\n              part: page.part || `Part ${index + 1}`,\n              duration: page.duration || 0\n            }))\n          } else {\n            // 如果没有分P信息，创建一个默认分P\n            this.videoParts = [{\n              id: this.videoInfo.cid || 0,\n              part: this.videoInfo.title || '默认分P',\n              duration: this.videoInfo.duration || 0\n            }]\n          }\n          \n          // 清空已选择的分P\n          this.selectedParts = []\n          this.$refs.multipleTable && this.$refs.multipleTable.clearSelection()\n          \n          // 解析可用的下载配置\n          this.parseAvailableResolutions(response.data)\n          this.parseAvailableCodecs(response.data)\n          this.parseAvailableFormats(response.data)\n          \n          // 设置默认下载配置（仅当还没有设置默认值时）\n          if (!this.downloadConfig.resolution && this.availableResolutions.length > 0) {\n            this.downloadConfig.resolution = this.availableResolutions[0].value\n          }\n          if (!this.downloadConfig.codec && this.availableCodecs.length > 0) {\n            this.downloadConfig.codec = this.availableCodecs[0].value\n          }\n          if (!this.downloadConfig.format && this.availableFormats.length > 0) {\n            this.downloadConfig.format = this.availableFormats[0].value\n          }\n          \n          // 设置默认下载名称为视频标题\n          if (this.videoInfo.title) {\n            this.downloadConfig.downloadName = this.videoInfo.title\n          }\n        } else {\n          this.$message.error(response.message)\n        }\n      } catch (error) {\n        this.$message.error('搜索失败: ' + error.message)\n      } finally {\n        this.searching = false\n      }\n    },\n    \n    // 获取代理图片URL\n    getProxyImageUrl(imageUrl) {\n      if (!imageUrl) return null\n      // 使用后端代理接口加载图片\n      return `/api/video/proxy-image?imageUrl=${encodeURIComponent(imageUrl)}`\n    },\n    \n    // 从输入中提取视频ID\n    extractVideoIdFromInput(input) {\n      // BV号格式\n      const bvMatch = input.match(/BV([A-Za-z0-9]+)/)\n      if (bvMatch && bvMatch[1]) {\n        return { bvid: 'BV' + bvMatch[1] }\n      }\n      \n      // 如果是BV号格式，直接返回\n      if (/^BV[A-Za-z0-9]+$/.test(input)) {\n        return { bvid: input }\n      }\n      \n      // aid格式\n      const avMatch = input.match(/av(\\d+)/) || input.match(/aid=(\\d+)/)\n      if (avMatch && avMatch[1]) {\n        return { aid: parseInt(avMatch[1]) }\n      }\n      \n      // 如果是纯数字，当作aid处理\n      if (/^\\d+$/.test(input)) {\n        return { aid: parseInt(input) }\n      }\n      \n      return { bvid: null, aid: null }\n    },\n    \n    // 解析可用的分辨率\n    parseAvailableResolutions(data) {\n      this.availableResolutions = []\n      \n      // 从DASH视频流中获取分辨率信息\n      if (data.dash && data.dash.video && data.dash.video.length > 0) {\n        const uniqueResolutions = new Set()\n        data.dash.video.forEach(video => {\n          if (video.id) {\n            uniqueResolutions.add(video.id)\n          }\n        })\n        \n        // 将唯一分辨率转换为选项\n        Array.from(uniqueResolutions).sort((a, b) => b - a).forEach(id => {\n          let label = id + 'P'\n          // 根据常见的分辨率ID映射标签\n          switch (id) {\n            case 16:\n              label = '360P 流畅'\n              break\n            case 32:\n              label = '480P 清晰'\n              break\n            case 64:\n              label = '720P 高清'\n              break\n            case 74:\n              label = '720P60 高清'\n              break\n            case 80:\n              label = '1080P 高清'\n              break\n            case 112:\n              label = '1080P+ 高码率'\n              break\n            case 116:\n              label = '1080P60 高帧率'\n              break\n            case 120:\n              label = '4K 超清'\n              break\n            case 125:\n              label = 'HDR 真彩色'\n              break\n            case 126:\n              label = '杜比视界'\n              break\n            case 127:\n              label = '8K 超高清'\n              break\n          }\n          \n          this.availableResolutions.push({\n            value: id.toString(),\n            label: label\n          })\n        })\n      }\n      \n      // 如果仍然没有分辨率信息，设置默认值\n      if (this.availableResolutions.length === 0) {\n        this.availableResolutions = [\n          { value: '64', label: '720P 高清' },\n          { value: '80', label: '1080P 高清' },\n          { value: '112', label: '1080P+ 高码率' }\n        ]\n      }\n    },\n    \n    // 解析可用的编码格式\n    parseAvailableCodecs(data) {\n      this.availableCodecs = []\n      \n      // 从DASH视频流中获取编码格式信息\n      if (data.dash && data.dash.video && data.dash.video.length > 0) {\n        const uniqueCodecs = new Map()\n        data.dash.video.forEach(video => {\n          if (video.codecs) {\n            // 根据codecs值映射到编码格式标签\n            let label = video.codecs\n            if (video.codecs.includes('avc1')) {\n              label = 'H.264'\n            } else if (video.codecs.includes('hev1') || video.codecs.includes('hvc1')) {\n              label = 'H.265'\n            } else if (video.codecs.includes('vp09') || video.codecs.includes('vp9')) {\n              label = 'VP9'\n            } else if (video.codecs.includes('av01')) {\n              label = 'AV1'\n            }\n            \n            // 使用Map确保唯一性，避免重复\n            // 修复：直接使用video.codecs作为键\n            const key = video.codecs\n            uniqueCodecs.set(key, {\n              value: video.codecs,\n              label: label\n            })\n          }\n        })\n        \n        this.availableCodecs = Array.from(uniqueCodecs.values())\n      }\n      \n      // 如果没有编码格式信息，设置默认值\n      if (this.availableCodecs.length === 0) {\n        this.availableCodecs = [\n          { value: 'h264', label: 'H.264' },\n          { value: 'h265', label: 'H.265' },\n          { value: 'vp9', label: 'VP9' }\n        ]\n      }\n    },\n    \n    // 解析可用的流媒体格式\n    parseAvailableFormats(data) {\n      this.availableFormats = []\n      \n      // 根据返回的数据判断支持的格式\n      if (data.dash) {\n        this.availableFormats.push({ value: 'dash', label: 'DASH' })\n      }\n      \n      if (data.durl) {\n        this.availableFormats.push({ value: 'mp4', label: 'MP4' })\n      }\n      \n      // 如果没有格式信息，设置默认值\n      if (this.availableFormats.length === 0) {\n        this.availableFormats = [\n          { value: 'dash', label: 'DASH' },\n          { value: 'mp4', label: 'MP4' }\n        ]\n      }\n    },\n    \n    // 设置默认下载配置\n    setDefaultDownloadConfigs() {\n      this.availableResolutions = [\n        { value: '64', label: '720P 高清' },\n        { value: '80', label: '1080P 高清' },\n        { value: '112', label: '1080P+ 高码率' }\n      ]\n      \n      this.availableCodecs = [\n        { value: 'h264', label: 'H.264' },\n        { value: 'h265', label: 'H.265' },\n        { value: 'vp9', label: 'VP9' }\n      ]\n      \n      this.availableFormats = [\n        { value: 'dash', label: 'DASH' },\n        { value: 'mp4', label: 'MP4' }\n      ]\n      \n      // 设置默认值\n      this.downloadConfig.resolution = '64'\n      this.downloadConfig.codec = 'h264'\n      this.downloadConfig.format = 'dash'\n    },\n    \n    // 处理选择变化\n    handleSelectionChange(selection) {\n      this.selectedParts = selection\n    },\n    \n    // 全选/取消全选\n    toggleSelectAll() {\n      if (this.selectedParts.length === this.videoParts.length) {\n        // 取消全选\n        this.$refs.multipleTable.clearSelection()\n      } else {\n        // 全选\n        this.videoParts.forEach(row => {\n          this.$refs.multipleTable.toggleRowSelection(row, true)\n        })\n      }\n    },\n    \n    // 显示下载对话框\n    showDownloadDialog() {\n      if (this.selectedParts.length === 0) {\n        this.$message.warning('请至少选择一个分P')\n        return\n      }\n      this.downloadDialogVisible = true\n      \n      // 确保DOM更新后再检查refs\n      this.$nextTick(() => {\n        console.log('对话框打开后检查refs:', this.$refs);\n      });\n    },\n    \n    // 开始下载\n    async startDownload() {\n      try {\n        // 构造下载参数\n        const downloadParams = {\n          videoUrl: `https://www.bilibili.com/video/${this.videoInfo.bvid}`,\n          parts: this.selectedParts.map(part => ({\n            cid: part.id,\n            title: part.part\n          })),\n          config: this.downloadConfig\n        }\n        \n        // 调用下载API\n        const response = await downloadVideo(downloadParams)\n        if (response.code === 0) {\n          this.$message.success('下载任务已创建')\n          this.downloadTaskId = response.data\n          this.downloadDialogVisible = false\n          \n          // 重新加载下载记录\n          this.loadDownloadRecords();\n        } else {\n          this.$message.error(response.message)\n        }\n      } catch (error) {\n        this.$message.error('下载失败: ' + error.message)\n      }\n    },\n    \n    // 格式化数字\n    formatNumber(num) {\n      if (num >= 10000) {\n        return (num / 10000).toFixed(1) + '万'\n      }\n      return num\n    },\n    \n    // 格式化时长\n    formatDuration(seconds) {\n      const hours = Math.floor(seconds / 3600)\n      const minutes = Math.floor((seconds % 3600) / 60)\n      const secs = seconds % 60\n      \n      if (hours > 0) {\n        return `${hours}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`\n      } else {\n        return `${minutes}:${secs.toString().padStart(2, '0')}`\n      }\n    },\n    \n    // 获取默认封面\n    getDefaultCover() {\n      return 'https://i0.hdslb.com/bfs/archive/5242750857121e05146d5d1b5574913bad4410f7.jpg'\n    },\n    \n    // 获取默认头像\n    getDefaultAvatar() {\n      return 'https://i0.hdslb.com/bfs/face/member/noface.jpg'\n    },\n    \n    // 处理封面加载错误\n    handleCoverError(e) {\n      e.target.src = this.getDefaultCover()\n    },\n    \n    // 处理头像加载错误\n    handleAvatarError(e) {\n      e.target.src = this.getDefaultAvatar()\n    },\n    \n    // 格式化时间\n    formatTime(time) {\n      if (!time) return ''\n      return new Date(time).toLocaleString('zh-CN')\n    },\n    \n    // 加载下载记录\n    async loadDownloadRecords() {\n      try {\n        // 加载待下载任务\n        const pendingResponse = await getPendingDownloads()\n        if (pendingResponse.code === 0) {\n          this.pendingDownloads = pendingResponse.data || []\n        }\n        \n        // 加载下载中任务\n        const downloadingResponse = await getDownloadingDownloads()\n        if (downloadingResponse.code === 0) {\n          this.downloadingDownloads = downloadingResponse.data || []\n        }\n        \n        // 加载已完成任务\n        const completedResponse = await getCompletedDownloads()\n        if (completedResponse.code === 0) {\n          this.completedDownloads = completedResponse.data || []\n        }\n      } catch (error) {\n        console.error('加载下载记录失败:', error)\n      }\n    },\n    \n    // 删除下载记录\n    async deleteDownloadRecord(taskId) {\n      try {\n        await deleteDownloadRecord(taskId)\n        this.$message.success('删除成功')\n        // 重新加载下载记录\n        this.loadDownloadRecords()\n      } catch (error) {\n        this.$message.error('删除失败: ' + error.message)\n      }\n    },\n    \n    // 处理主标签页点击\n    handleMainTabClick(tab) {\n      if (tab.name === 'downloadRecord') {\n        // 切换到下载记录标签页时，刷新数据\n        this.loadDownloadRecords()\n      }\n    },\n    \n    // 处理记录标签页点击\n    handleRecordTabClick(tab) {\n      // 每次切换记录标签页时都刷新对应的数据\n      switch (tab.name) {\n        case 'pending':\n          this.loadPendingDownloads()\n          break\n        case 'downloading':\n          this.loadDownloadingDownloads()\n          break\n        case 'completed':\n          this.loadCompletedDownloads()\n          break\n      }\n    },\n    \n    // 加载待下载任务\n    async loadPendingDownloads() {\n      try {\n        const response = await getPendingDownloads()\n        if (response.code === 0) {\n          this.pendingDownloads = response.data || []\n        }\n      } catch (error) {\n        console.error('加载待下载任务失败:', error)\n      }\n    },\n    \n    // 加载下载中任务\n    async loadDownloadingDownloads() {\n      try {\n        const response = await getDownloadingDownloads()\n        if (response.code === 0) {\n          this.downloadingDownloads = response.data || []\n        }\n      } catch (error) {\n        console.error('加载下载中任务失败:', error)\n      }\n    },\n    \n    // 加载已完成任务\n    async loadCompletedDownloads() {\n      try {\n        const response = await getCompletedDownloads()\n        if (response.code === 0) {\n          this.completedDownloads = response.data || []\n        }\n      } catch (error) {\n        console.error('加载已完成任务失败:', error)\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.video-download {\n  padding: 20px;\n}\n\n.search-card {\n  margin-bottom: 20px;\n}\n\n.video-info-card {\n  margin-bottom: 20px;\n}\n\n.video-header {\n  display: flex;\n  margin-bottom: 20px;\n  border-bottom: 1px solid #ebeef5;\n  padding-bottom: 20px;\n}\n\n.video-cover {\n  width: 160px;\n  height: 100px;\n  margin-right: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #f5f7fa;\n  border-radius: 4px;\n  overflow: hidden;\n}\n\n.cover-img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  border-radius: 4px;\n  display: block;\n}\n\n.video-details {\n  flex: 1;\n}\n\n.video-title {\n  font-size: 18px;\n  font-weight: bold;\n  margin-bottom: 10px;\n}\n\n.video-stats {\n  display: flex;\n  flex-wrap: wrap;\n  margin-bottom: 10px;\n}\n\n.stat-item {\n  margin-right: 15px;\n  font-size: 12px;\n  color: #909399;\n}\n\n.video-desc {\n  font-size: 14px;\n  color: #606266;\n  line-height: 1.5;\n  max-height: 60px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n\n.uploader-info {\n  text-align: center;\n  width: 80px;\n}\n\n.uploader-avatar {\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  margin-bottom: 5px;\n}\n\n.uploader-name {\n  font-size: 12px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.parts-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 15px;\n}\n\n.parts-actions {\n  display: flex;\n  gap: 10px;\n}\n\n/* 下载记录样式 */\n.download-tabs {\n  margin-top: 20px;\n}\n\n.record-tabs {\n  min-height: 400px;\n}\n\n.download-list {\n  padding: 20px;\n}\n\n.download-item {\n  margin-bottom: 15px;\n}\n\n.download-item-content {\n  padding: 15px;\n}\n\n.item-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 10px;\n}\n\n.part-title {\n  font-size: 16px;\n  font-weight: bold;\n  color: #303133;\n}\n\n.item-config {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 15px;\n  margin-bottom: 10px;\n}\n\n.config-item {\n  display: flex;\n  align-items: center;\n}\n\n.config-label {\n  font-size: 12px;\n  color: #909399;\n  margin-right: 5px;\n}\n\n.config-value {\n  font-size: 12px;\n  color: #606266;\n}\n\n.item-progress {\n  margin: 15px 0;\n}\n\n.item-time {\n  font-size: 12px;\n  color: #909399;\n}\n\n.no-data {\n  text-align: center;\n  color: #909399;\n  padding: 50px 0;\n}\n</style>"]}]}