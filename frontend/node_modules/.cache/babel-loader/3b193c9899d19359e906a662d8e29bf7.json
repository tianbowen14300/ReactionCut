{"remainingRequest":"/Users/tbw/work/btProject/reaction-cut/frontend/node_modules/.pnpm/babel-loader@8.4.1_@babel+core@7.28.5_webpack@4.47.0/node_modules/babel-loader/lib/index.js!/Users/tbw/work/btProject/reaction-cut/frontend/node_modules/.pnpm/eslint-loader@2.2.1_eslint@6.8.0_webpack@4.47.0/node_modules/eslint-loader/index.js??ref--14-0!/Users/tbw/work/btProject/reaction-cut/frontend/src/utils/bilibiliAuth.js","dependencies":[{"path":"/Users/tbw/work/btProject/reaction-cut/frontend/src/utils/bilibiliAuth.js","mtime":1762013377099},{"path":"/Users/tbw/work/btProject/reaction-cut/frontend/node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js","mtime":1761026713270},{"path":"/Users/tbw/work/btProject/reaction-cut/frontend/node_modules/.pnpm/babel-loader@8.4.1_@babel+core@7.28.5_webpack@4.47.0/node_modules/babel-loader/lib/index.js","mtime":1761026722096},{"path":"/Users/tbw/work/btProject/reaction-cut/frontend/node_modules/.pnpm/eslint-loader@2.2.1_eslint@6.8.0_webpack@4.47.0/node_modules/eslint-loader/index.js","mtime":1762013127970}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8gQmlsaWJpbGnorqTor4Hlt6XlhbfnsbsKCmNsYXNzIEJpbGliaWxpQXV0aCB7CiAgLy8g55m75b2V5L+h5oGv5a2Y5YKo55qE6ZSu5ZCNCiAgLy8gc3RhdGljIExPR0lOX0lORk9fS0VZID0gJ2JpbGliaWxpX2xvZ2luX2luZm8nCgogIC8vIOS/neWtmOeZu+W9leS/oeaBrwogIHN0YXRpYyBzYXZlTG9naW5JbmZvKGxvZ2luSW5mbykgewogICAgdHJ5IHsKICAgICAgY29uc3QgaW5mbyA9IHsKICAgICAgICAuLi5sb2dpbkluZm8sCiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpCiAgICAgIH07CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdiaWxpYmlsaV9sb2dpbl9pbmZvJywgSlNPTi5zdHJpbmdpZnkoaW5mbykpOwogICAgICBjb25zb2xlLmxvZygn55m75b2V5L+h5oGv5bey5L+d5a2Y5Yiw5pys5Zyw5a2Y5YKoOicsIGluZm8pOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoJ+S/neWtmOeZu+W9leS/oeaBr+Wksei0pTonLCBlcnJvcik7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9CgogIC8vIOiOt+WPlueZu+W9leS/oeaBrwogIHN0YXRpYyBnZXRMb2dpbkluZm8oKSB7CiAgICB0cnkgewogICAgICBjb25zdCBpbmZvU3RyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2JpbGliaWxpX2xvZ2luX2luZm8nKTsKICAgICAgaWYgKCFpbmZvU3RyKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgICAgY29uc3QgaW5mbyA9IEpTT04ucGFyc2UoaW5mb1N0cik7CgogICAgICAvLyDmo4Dmn6XmmK/lkKbov4fmnJ/vvIgyNOWwj+aXtu+8iQogICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpOwogICAgICBjb25zdCBleHBpcmVUaW1lID0gMjQgKiA2MCAqIDYwICogMTAwMDsgLy8gMjTlsI/ml7YKICAgICAgaWYgKG5vdyAtIGluZm8udGltZXN0YW1wID4gZXhwaXJlVGltZSkgewogICAgICAgIHRoaXMuY2xlYXJMb2dpbkluZm8oKTsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgICByZXR1cm4gaW5mbzsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoJ+iOt+WPlueZu+W9leS/oeaBr+Wksei0pTonLCBlcnJvcik7CiAgICAgIHJldHVybiBudWxsOwogICAgfQogIH0KCiAgLy8g5qOA5p+l5piv5ZCm5bey55m75b2VCiAgc3RhdGljIGlzTG9nZ2VkSW4oKSB7CiAgICByZXR1cm4gdGhpcy5nZXRMb2dpbkluZm8oKSAhPT0gbnVsbDsKICB9CgogIC8vIOa4hemZpOeZu+W9leS/oeaBrwogIHN0YXRpYyBjbGVhckxvZ2luSW5mbygpIHsKICAgIHRyeSB7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdiaWxpYmlsaV9sb2dpbl9pbmZvJyk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgY29uc29sZS5lcnJvcign5riF6Zmk55m75b2V5L+h5oGv5aSx6LSlOicsIGVycm9yKTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0KCiAgLy8g6I635Y+W6K6k6K+BY29va2llCiAgc3RhdGljIGdldEF1dGhDb29raWVzKCkgewogICAgY29uc3QgbG9naW5JbmZvID0gdGhpcy5nZXRMb2dpbkluZm8oKTsKICAgIGlmICghbG9naW5JbmZvIHx8ICFsb2dpbkluZm8uZGF0YSkgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICAvLyDku47nmbvlvZXmlbDmja7kuK3mj5Dlj5Zjb29raWXkv6Hmga8KICAgIC8vIOagueaNruWunumZheeahOWTjeW6lOe7k+aehOiwg+aVtOaPkOWPlumAu+i+kQogICAgcmV0dXJuIHRoaXMuZXh0cmFjdENvb2tpZXNGcm9tRGF0YShsb2dpbkluZm8uZGF0YSk7CiAgfQoKICAvLyDku47mlbDmja7kuK3mj5Dlj5ZDb29raWUKICBzdGF0aWMgZXh0cmFjdENvb2tpZXNGcm9tRGF0YShkYXRhKSB7CiAgICB0cnkgewogICAgICAvLyDmoLnmja7lrp7pmYXnmoTnmbvlvZXlk43lupTnu5PmnoTosIPmlbTmj5Dlj5bpgLvovpEKICAgICAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykgewogICAgICAgIC8vIOWmguaenGRhdGHmmK/lrZfnrKbkuLLvvIzlj6/og73nm7TmjqXljIXlkKvkuoZjb29raWXkv6Hmga8KICAgICAgICByZXR1cm4gZGF0YTsKICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZGF0YSA9PT0gJ29iamVjdCcpIHsKICAgICAgICAvLyDlpoLmnpxkYXRh5piv5a+56LGh77yM5p+l5om+Y29va2ll5a2X5q61CiAgICAgICAgaWYgKGRhdGEuY29va2llKSB7CiAgICAgICAgICByZXR1cm4gZGF0YS5jb29raWU7CiAgICAgICAgfSBlbHNlIGlmIChkYXRhLmNvb2tpZXMpIHsKICAgICAgICAgIHJldHVybiBkYXRhLmNvb2tpZXM7CiAgICAgICAgfSBlbHNlIGlmIChkYXRhLmRhdGEgJiYgdHlwZW9mIGRhdGEuZGF0YSA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgIC8vIOWmguaenGRhdGHlrZfmrrXmmK/lrZfnrKbkuLLvvIzlj6/og73ljIXlkKvkuoZjb29raWXkv6Hmga8KICAgICAgICAgIHJldHVybiBkYXRhLmRhdGE7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBudWxsOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgY29uc29sZS5lcnJvcign5o+Q5Y+WQ29va2ll5L+h5oGv5aSx6LSlOicsIGVycm9yKTsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgfQp9CmV4cG9ydCBkZWZhdWx0IEJpbGliaWxpQXV0aDs="},{"version":3,"names":["BilibiliAuth","saveLoginInfo","loginInfo","info","timestamp","Date","now","localStorage","setItem","JSON","stringify","console","log","error","getLoginInfo","infoStr","getItem","parse","expireTime","clearLoginInfo","isLoggedIn","removeItem","getAuthCookies","data","extractCookiesFromData","cookie","cookies"],"sources":["/Users/tbw/work/btProject/reaction-cut/frontend/src/utils/bilibiliAuth.js"],"sourcesContent":["// Bilibili认证工具类\n\nclass BilibiliAuth {\n  // 登录信息存储的键名\n  // static LOGIN_INFO_KEY = 'bilibili_login_info'\n  \n  // 保存登录信息\n  static saveLoginInfo(loginInfo) {\n    try {\n      const info = {\n        ...loginInfo,\n        timestamp: Date.now()\n      }\n      localStorage.setItem('bilibili_login_info', JSON.stringify(info))\n      console.log('登录信息已保存到本地存储:', info)\n      return true\n    } catch (error) {\n      console.error('保存登录信息失败:', error)\n      return false\n    }\n  }\n  \n  // 获取登录信息\n  static getLoginInfo() {\n    try {\n      const infoStr = localStorage.getItem('bilibili_login_info')\n      if (!infoStr) {\n        return null\n      }\n      \n      const info = JSON.parse(infoStr)\n      \n      // 检查是否过期（24小时）\n      const now = Date.now()\n      const expireTime = 24 * 60 * 60 * 1000 // 24小时\n      if (now - info.timestamp > expireTime) {\n        this.clearLoginInfo()\n        return null\n      }\n      \n      return info\n    } catch (error) {\n      console.error('获取登录信息失败:', error)\n      return null\n    }\n  }\n  \n  // 检查是否已登录\n  static isLoggedIn() {\n    return this.getLoginInfo() !== null\n  }\n  \n  // 清除登录信息\n  static clearLoginInfo() {\n    try {\n      localStorage.removeItem('bilibili_login_info')\n      return true\n    } catch (error) {\n      console.error('清除登录信息失败:', error)\n      return false\n    }\n  }\n  \n  // 获取认证cookie\n  static getAuthCookies() {\n    const loginInfo = this.getLoginInfo()\n    if (!loginInfo || !loginInfo.data) {\n      return null\n    }\n    \n    // 从登录数据中提取cookie信息\n    // 根据实际的响应结构调整提取逻辑\n    return this.extractCookiesFromData(loginInfo.data)\n  }\n  \n  // 从数据中提取Cookie\n  static extractCookiesFromData(data) {\n    try {\n      // 根据实际的登录响应结构调整提取逻辑\n      if (typeof data === 'string') {\n        // 如果data是字符串，可能直接包含了cookie信息\n        return data\n      } else if (typeof data === 'object') {\n        // 如果data是对象，查找cookie字段\n        if (data.cookie) {\n          return data.cookie\n        } else if (data.cookies) {\n          return data.cookies\n        } else if (data.data && typeof data.data === 'string') {\n          // 如果data字段是字符串，可能包含了cookie信息\n          return data.data\n        }\n      }\n      return null\n    } catch (error) {\n      console.error('提取Cookie信息失败:', error)\n      return null\n    }\n  }\n}\n\nexport default BilibiliAuth"],"mappings":"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","ignoreList":[]}]}