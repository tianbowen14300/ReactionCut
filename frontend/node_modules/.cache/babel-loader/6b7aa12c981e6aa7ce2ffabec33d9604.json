{"remainingRequest":"/Users/tbw/work/btProject/reaction-cut/frontend/node_modules/.pnpm/babel-loader@8.4.1_@babel+core@7.28.5_webpack@4.47.0/node_modules/babel-loader/lib/index.js!/Users/tbw/work/btProject/reaction-cut/frontend/node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/tbw/work/btProject/reaction-cut/frontend/node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.5.22_cache-loader@4.1.0_webpack@4.47.0__css-load_f9e102e5cbb5fa5aa7d45569a28cebe6/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tbw/work/btProject/reaction-cut/frontend/src/views/VideoStreamTest.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/tbw/work/btProject/reaction-cut/frontend/src/views/VideoStreamTest.vue","mtime":1761983734854},{"path":"/Users/tbw/work/btProject/reaction-cut/frontend/node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js","mtime":1761026713270},{"path":"/Users/tbw/work/btProject/reaction-cut/frontend/node_modules/.pnpm/babel-loader@8.4.1_@babel+core@7.28.5_webpack@4.47.0/node_modules/babel-loader/lib/index.js","mtime":1761026722096},{"path":"/Users/tbw/work/btProject/reaction-cut/frontend/node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js","mtime":1761026713270},{"path":"/Users/tbw/work/btProject/reaction-cut/frontend/node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.5.22_cache-loader@4.1.0_webpack@4.47.0__css-load_f9e102e5cbb5fa5aa7d45569a28cebe6/node_modules/vue-loader/lib/index.js","mtime":1761026704427}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZ2V0VmlkZW9EZXRhaWwsIGdldFZpZGVvUGxheVVybCB9IGZyb20gJ0AvYXBpL3ZpZGVvJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdWaWRlb1N0cmVhbVRlc3QnLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBidmlkOiAnJywKICAgICAgY2lkOiAnJywKICAgICAgcW46ICcxMTInLAogICAgICBmbnZhbDogJzQwNDgnLAogICAgICBmbnZlcjogJzAnLAogICAgICBmb3VyazogJzEnLAogICAgICByZXN1bHQ6IG51bGwsCiAgICAgIGVycm9yOiBudWxsLAogICAgICBsb2FkaW5nOiBmYWxzZQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGdldFZpZGVvSW5mbygpIHsKICAgICAgaWYgKCF0aGlzLmJ2aWQpIHsKICAgICAgICB0aGlzLmVycm9yID0gJ+ivt+i+k+WFpUJW5Y+3JzsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgdGhpcy5lcnJvciA9IG51bGw7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnZXRWaWRlb0RldGFpbCh0aGlzLmJ2aWQpOwogICAgICAgIGlmIChyZXNwb25zZS5jb2RlID09PSAwICYmIHJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgIC8vIOiOt+WPluesrOS4gOS4quWIhlDnmoRDSUQKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnBhZ2VzICYmIHJlc3BvbnNlLmRhdGEucGFnZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICB0aGlzLmNpZCA9IHJlc3BvbnNlLmRhdGEucGFnZXNbMF0uY2lkLnRvU3RyaW5nKCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmNpZCA9IHJlc3BvbnNlLmRhdGEuY2lkLnRvU3RyaW5nKCk7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnJlc3VsdCA9IHJlc3BvbnNlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmVycm9yID0gcmVzcG9uc2UubWVzc2FnZSB8fCAn6I635Y+W6KeG6aKR5L+h5oGv5aSx6LSlJzsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIHRoaXMuZXJyb3IgPSBlcnIubWVzc2FnZSB8fCAn6I635Y+W6KeG6aKR5L+h5oGv5aSx6LSlJzsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIGFzeW5jIGdldFZpZGVvUGxheVVybCgpIHsKICAgICAgaWYgKCF0aGlzLmJ2aWQgfHwgIXRoaXMuY2lkKSB7CiAgICAgICAgdGhpcy5lcnJvciA9ICfor7fovpPlhaVCVuWPt+WSjENJRCc7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIHRoaXMucmVzdWx0ID0gbnVsbDsKICAgICAgdGhpcy5lcnJvciA9IG51bGw7CiAgICAgIHRyeSB7CiAgICAgICAgLy8g5p6E6YCg5Y+C5pWw5a+56LGh77yM5Y+q5YyF5ZCr6Z2e56m65YC8CiAgICAgICAgY29uc3QgcGFyYW1zID0ge307CiAgICAgICAgaWYgKHRoaXMucW4pIHBhcmFtcy5xbiA9IHRoaXMucW47CiAgICAgICAgaWYgKHRoaXMuZm52YWwpIHBhcmFtcy5mbnZhbCA9IHRoaXMuZm52YWw7CiAgICAgICAgaWYgKHRoaXMuZm52ZXIpIHBhcmFtcy5mbnZlciA9IHRoaXMuZm52ZXI7CiAgICAgICAgaWYgKHRoaXMuZm91cmspIHBhcmFtcy5mb3VyayA9IHRoaXMuZm91cms7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnZXRWaWRlb1BsYXlVcmwodGhpcy5idmlkLCB0aGlzLmNpZCwgcGFyYW1zKTsKICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PT0gMCkgewogICAgICAgICAgdGhpcy5yZXN1bHQgPSByZXNwb25zZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5lcnJvciA9IHJlc3BvbnNlLm1lc3NhZ2UgfHwgJ+iOt+WPluinhumikea1gVVSTOWksei0pSc7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICB0aGlzLmVycm9yID0gZXJyLm1lc3NhZ2UgfHwgJ+iOt+WPluinhumikea1gVVSTOWksei0pSc7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"names":["getVideoDetail","getVideoPlayUrl","name","data","bvid","cid","qn","fnval","fnver","fourk","result","error","loading","methods","getVideoInfo","response","code","pages","length","toString","message","err","params"],"sources":["src/views/VideoStreamTest.vue"],"sourcesContent":["<template>\n  <div class=\"video-stream-test\">\n    <h2>视频流URL测试</h2>\n    \n    <div class=\"form-group\">\n      <label>视频BV号:</label>\n      <input v-model=\"bvid\" placeholder=\"请输入BV号，如：BV1Xx411175n\" />\n    </div>\n    \n    <div class=\"form-group\">\n      <label>视频CID:</label>\n      <input v-model=\"cid\" placeholder=\"请输入CID\" />\n      <button @click=\"getVideoInfo\" :disabled=\"!bvid\">获取CID</button>\n    </div>\n    \n    <div class=\"form-group\">\n      <label>清晰度 (qn):</label>\n      <select v-model=\"qn\">\n        <option value=\"\">默认</option>\n        <option value=\"6\">240P 极速</option>\n        <option value=\"16\">360P 流畅</option>\n        <option value=\"32\">480P 清晰</option>\n        <option value=\"64\">720P 高清</option>\n        <option value=\"74\">720P60 高帧率</option>\n        <option value=\"80\">1080P 高清</option>\n        <option value=\"100\">智能修复</option>\n        <option value=\"112\">1080P+ 高码率</option>\n        <option value=\"116\">1080P60 高帧率</option>\n        <option value=\"120\">4K 超清</option>\n        <option value=\"125\">HDR 真彩色</option>\n        <option value=\"126\">杜比视界</option>\n        <option value=\"127\">8K 超高清</option>\n      </select>\n    </div>\n    \n    <div class=\"form-group\">\n      <label>格式标识 (fnval):</label>\n      <select v-model=\"fnval\">\n        <option value=\"\">默认</option>\n        <option value=\"0\">FLV 格式</option>\n        <option value=\"1\">MP4 格式</option>\n        <option value=\"16\">DASH 格式</option>\n        <option value=\"64\">HDR 视频</option>\n        <option value=\"128\">4K 分辨率</option>\n        <option value=\"256\">杜比音频</option>\n        <option value=\"512\">杜比视界</option>\n        <option value=\"1024\">8K 分辨率</option>\n        <option value=\"2048\">AV1 编码</option>\n        <option value=\"4048\">所有DASH格式</option>\n      </select>\n    </div>\n    \n    <div class=\"form-group\">\n      <label>版本标识 (fnver):</label>\n      <select v-model=\"fnver\">\n        <option value=\"\">默认</option>\n        <option value=\"0\">0</option>\n      </select>\n    </div>\n    \n    <div class=\"form-group\">\n      <label>4K支持 (fourk):</label>\n      <select v-model=\"fourk\">\n        <option value=\"\">默认</option>\n        <option value=\"0\">不支持4K</option>\n        <option value=\"1\">支持4K</option>\n      </select>\n    </div>\n    \n    <button @click=\"getVideoPlayUrl\" :disabled=\"!bvid || !cid\">获取视频流URL</button>\n    \n    <div v-if=\"loading\" class=\"loading\">加载中...</div>\n    \n    <div v-if=\"result\" class=\"result\">\n      <h3>结果:</h3>\n      <pre>{{ JSON.stringify(result, null, 2) }}</pre>\n      \n      <div v-if=\"result.data && result.data.dash\" class=\"stream-info\">\n        <h4>DASH流信息:</h4>\n        <div v-if=\"result.data.dash.video && result.data.dash.video.length > 0\">\n          <h5>视频流:</h5>\n          <ul>\n            <li v-for=\"(video, index) in result.data.dash.video\" :key=\"index\">\n              清晰度: {{ video.id }}, 编码: {{ video.codecs }}, 分辨率: {{ video.width }}x{{ video.height }}, 帧率: {{ video.frameRate }}\n              <br>\n              URL: <a :href=\"video.baseUrl\" target=\"_blank\">{{ video.baseUrl }}</a>\n            </li>\n          </ul>\n        </div>\n        \n        <div v-if=\"result.data.dash.audio && result.data.dash.audio.length > 0\">\n          <h5>音频流:</h5>\n          <ul>\n            <li v-for=\"(audio, index) in result.data.dash.audio\" :key=\"index\">\n              音质: {{ audio.id }}, 编码: {{ audio.codecs }}\n              <br>\n              URL: <a :href=\"audio.baseUrl\" target=\"_blank\">{{ audio.baseUrl }}</a>\n            </li>\n          </ul>\n        </div>\n      </div>\n      \n      <div v-else-if=\"result.data && result.data.durl && result.data.durl.length > 0\" class=\"stream-info\">\n        <h4>MP4/FLV流信息:</h4>\n        <ul>\n          <li v-for=\"(durl, index) in result.data.durl\" :key=\"index\">\n            大小: {{ durl.size }} bytes, 长度: {{ durl.length }} ms\n            <br>\n            URL: <a :href=\"durl.url\" target=\"_blank\">{{ durl.url }}</a>\n            <div v-if=\"durl.backup_url && durl.backup_url.length > 0\">\n              <h6>备用URL:</h6>\n              <ul>\n                <li v-for=\"(backupUrl, backupIndex) in durl.backup_url\" :key=\"backupIndex\">\n                  <a :href=\"backupUrl\" target=\"_blank\">{{ backupUrl }}</a>\n                </li>\n              </ul>\n            </div>\n          </li>\n        </ul>\n      </div>\n    </div>\n    \n    <div v-if=\"error\" class=\"error\">\n      <h3>错误:</h3>\n      <p>{{ error }}</p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getVideoDetail, getVideoPlayUrl } from '@/api/video'\n\nexport default {\n  name: 'VideoStreamTest',\n  data() {\n    return {\n      bvid: '',\n      cid: '',\n      qn: '112',\n      fnval: '4048',\n      fnver: '0',\n      fourk: '1',\n      result: null,\n      error: null,\n      loading: false\n    }\n  },\n  methods: {\n    async getVideoInfo() {\n      if (!this.bvid) {\n        this.error = '请输入BV号'\n        return\n      }\n      \n      this.loading = true\n      this.error = null\n      \n      try {\n        const response = await getVideoDetail(this.bvid)\n        if (response.code === 0 && response.data) {\n          // 获取第一个分P的CID\n          if (response.data.pages && response.data.pages.length > 0) {\n            this.cid = response.data.pages[0].cid.toString()\n          } else {\n            this.cid = response.data.cid.toString()\n          }\n          this.result = response\n        } else {\n          this.error = response.message || '获取视频信息失败'\n        }\n      } catch (err) {\n        this.error = err.message || '获取视频信息失败'\n      } finally {\n        this.loading = false\n      }\n    },\n    \n    async getVideoPlayUrl() {\n      if (!this.bvid || !this.cid) {\n        this.error = '请输入BV号和CID'\n        return\n      }\n      \n      this.loading = true\n      this.result = null\n      this.error = null\n      \n      try {\n        // 构造参数对象，只包含非空值\n        const params = {}\n        if (this.qn) params.qn = this.qn\n        if (this.fnval) params.fnval = this.fnval\n        if (this.fnver) params.fnver = this.fnver\n        if (this.fourk) params.fourk = this.fourk\n        \n        const response = await getVideoPlayUrl(this.bvid, this.cid, params)\n        if (response.code === 0) {\n          this.result = response\n        } else {\n          this.error = response.message || '获取视频流URL失败'\n        }\n      } catch (err) {\n        this.error = err.message || '获取视频流URL失败'\n      } finally {\n        this.loading = false\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.video-stream-test {\n  padding: 20px;\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\n.form-group {\n  margin-bottom: 15px;\n}\n\n.form-group label {\n  display: inline-block;\n  width: 150px;\n  font-weight: bold;\n}\n\n.form-group input,\n.form-group select {\n  width: 300px;\n  padding: 8px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n}\n\n.form-group button {\n  margin-left: 10px;\n  padding: 8px 16px;\n  background-color: #007bff;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n}\n\n.form-group button:disabled {\n  background-color: #ccc;\n  cursor: not-allowed;\n}\n\nbutton {\n  padding: 10px 20px;\n  background-color: #28a745;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 16px;\n}\n\nbutton:disabled {\n  background-color: #ccc;\n  cursor: not-allowed;\n}\n\n.loading {\n  text-align: center;\n  padding: 20px;\n  font-size: 18px;\n}\n\n.result {\n  margin-top: 20px;\n  padding: 15px;\n  background-color: #f8f9fa;\n  border-radius: 4px;\n}\n\n.result h3,\n.result h4,\n.result h5,\n.result h6 {\n  margin-top: 0;\n}\n\n.result pre {\n  background-color: #e9ecef;\n  padding: 10px;\n  border-radius: 4px;\n  overflow-x: auto;\n}\n\n.stream-info ul {\n  list-style-type: none;\n  padding: 0;\n}\n\n.stream-info li {\n  margin-bottom: 10px;\n  padding: 10px;\n  background-color: white;\n  border-radius: 4px;\n  box-shadow: 0 1px 3px rgba(0,0,0,0.1);\n}\n\n.error {\n  margin-top: 20px;\n  padding: 15px;\n  background-color: #f8d7da;\n  color: #721c24;\n  border-radius: 4px;\n}\n</style>"],"mappings":"AAkIA,SAAAA,cAAA,EAAAC,eAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,IAAA;MACAC,GAAA;MACAC,EAAA;MACAC,KAAA;MACAC,KAAA;MACAC,KAAA;MACAC,MAAA;MACAC,KAAA;MACAC,OAAA;IACA;EACA;EACAC,OAAA;IACA,MAAAC,aAAA;MACA,UAAAV,IAAA;QACA,KAAAO,KAAA;QACA;MACA;MAEA,KAAAC,OAAA;MACA,KAAAD,KAAA;MAEA;QACA,MAAAI,QAAA,SAAAf,cAAA,MAAAI,IAAA;QACA,IAAAW,QAAA,CAAAC,IAAA,UAAAD,QAAA,CAAAZ,IAAA;UACA;UACA,IAAAY,QAAA,CAAAZ,IAAA,CAAAc,KAAA,IAAAF,QAAA,CAAAZ,IAAA,CAAAc,KAAA,CAAAC,MAAA;YACA,KAAAb,GAAA,GAAAU,QAAA,CAAAZ,IAAA,CAAAc,KAAA,IAAAZ,GAAA,CAAAc,QAAA;UACA;YACA,KAAAd,GAAA,GAAAU,QAAA,CAAAZ,IAAA,CAAAE,GAAA,CAAAc,QAAA;UACA;UACA,KAAAT,MAAA,GAAAK,QAAA;QACA;UACA,KAAAJ,KAAA,GAAAI,QAAA,CAAAK,OAAA;QACA;MACA,SAAAC,GAAA;QACA,KAAAV,KAAA,GAAAU,GAAA,CAAAD,OAAA;MACA;QACA,KAAAR,OAAA;MACA;IACA;IAEA,MAAAX,gBAAA;MACA,UAAAG,IAAA,UAAAC,GAAA;QACA,KAAAM,KAAA;QACA;MACA;MAEA,KAAAC,OAAA;MACA,KAAAF,MAAA;MACA,KAAAC,KAAA;MAEA;QACA;QACA,MAAAW,MAAA;QACA,SAAAhB,EAAA,EAAAgB,MAAA,CAAAhB,EAAA,QAAAA,EAAA;QACA,SAAAC,KAAA,EAAAe,MAAA,CAAAf,KAAA,QAAAA,KAAA;QACA,SAAAC,KAAA,EAAAc,MAAA,CAAAd,KAAA,QAAAA,KAAA;QACA,SAAAC,KAAA,EAAAa,MAAA,CAAAb,KAAA,QAAAA,KAAA;QAEA,MAAAM,QAAA,SAAAd,eAAA,MAAAG,IAAA,OAAAC,GAAA,EAAAiB,MAAA;QACA,IAAAP,QAAA,CAAAC,IAAA;UACA,KAAAN,MAAA,GAAAK,QAAA;QACA;UACA,KAAAJ,KAAA,GAAAI,QAAA,CAAAK,OAAA;QACA;MACA,SAAAC,GAAA;QACA,KAAAV,KAAA,GAAAU,GAAA,CAAAD,OAAA;MACA;QACA,KAAAR,OAAA;MACA;IACA;EACA;AACA","ignoreList":[]}]}