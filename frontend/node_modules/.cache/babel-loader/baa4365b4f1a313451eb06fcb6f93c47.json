{"remainingRequest":"/Users/tbw/work/btProject/reaction-cut/frontend/node_modules/.pnpm/babel-loader@8.4.1_@babel+core@7.28.5_webpack@4.47.0/node_modules/babel-loader/lib/index.js!/Users/tbw/work/btProject/reaction-cut/frontend/node_modules/.pnpm/eslint-loader@2.2.1_eslint@6.8.0_webpack@4.47.0/node_modules/eslint-loader/index.js??ref--14-0!/Users/tbw/work/btProject/reaction-cut/frontend/src/utils/bilibiliAuth.js","dependencies":[{"path":"/Users/tbw/work/btProject/reaction-cut/frontend/src/utils/bilibiliAuth.js","mtime":1761975611142},{"path":"/Users/tbw/work/btProject/reaction-cut/frontend/node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js","mtime":1761026713270},{"path":"/Users/tbw/work/btProject/reaction-cut/frontend/node_modules/.pnpm/babel-loader@8.4.1_@babel+core@7.28.5_webpack@4.47.0/node_modules/babel-loader/lib/index.js","mtime":1761026722096},{"path":"/Users/tbw/work/btProject/reaction-cut/frontend/node_modules/.pnpm/eslint-loader@2.2.1_eslint@6.8.0_webpack@4.47.0/node_modules/eslint-loader/index.js","mtime":1762013127970}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8gQmlsaWJpbGnorqTor4Hlt6XlhbfnsbsKCmNsYXNzIEJpbGliaWxpQXV0aCB7CiAgLy8g55m75b2V5L+h5oGv5a2Y5YKo55qE6ZSu5ZCNCiAgc3RhdGljIExPR0lOX0lORk9fS0VZID0gJ2JpbGliaWxpX2xvZ2luX2luZm8nOwoKICAvLyDkv53lrZjnmbvlvZXkv6Hmga8KICBzdGF0aWMgc2F2ZUxvZ2luSW5mbyhsb2dpbkluZm8pIHsKICAgIHRyeSB7CiAgICAgIGNvbnN0IGluZm8gPSB7CiAgICAgICAgLi4ubG9naW5JbmZvLAogICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKQogICAgICB9OwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0aGlzLkxPR0lOX0lORk9fS0VZLCBKU09OLnN0cmluZ2lmeShpbmZvKSk7CiAgICAgIGNvbnNvbGUubG9nKCfnmbvlvZXkv6Hmga/lt7Lkv53lrZjliLDmnKzlnLDlrZjlgqg6JywgaW5mbyk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgY29uc29sZS5lcnJvcign5L+d5a2Y55m75b2V5L+h5oGv5aSx6LSlOicsIGVycm9yKTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0KCiAgLy8g6I635Y+W55m75b2V5L+h5oGvCiAgc3RhdGljIGdldExvZ2luSW5mbygpIHsKICAgIHRyeSB7CiAgICAgIGNvbnN0IGluZm9TdHIgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0aGlzLkxPR0lOX0lORk9fS0VZKTsKICAgICAgaWYgKCFpbmZvU3RyKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgICAgY29uc3QgaW5mbyA9IEpTT04ucGFyc2UoaW5mb1N0cik7CgogICAgICAvLyDmo4Dmn6XmmK/lkKbov4fmnJ/vvIgyNOWwj+aXtu+8iQogICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpOwogICAgICBjb25zdCBleHBpcmVUaW1lID0gMjQgKiA2MCAqIDYwICogMTAwMDsgLy8gMjTlsI/ml7YKICAgICAgaWYgKG5vdyAtIGluZm8udGltZXN0YW1wID4gZXhwaXJlVGltZSkgewogICAgICAgIHRoaXMuY2xlYXJMb2dpbkluZm8oKTsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgICByZXR1cm4gaW5mbzsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoJ+iOt+WPlueZu+W9leS/oeaBr+Wksei0pTonLCBlcnJvcik7CiAgICAgIHJldHVybiBudWxsOwogICAgfQogIH0KCiAgLy8g5qOA5p+l5piv5ZCm5bey55m75b2VCiAgc3RhdGljIGlzTG9nZ2VkSW4oKSB7CiAgICByZXR1cm4gdGhpcy5nZXRMb2dpbkluZm8oKSAhPT0gbnVsbDsKICB9CgogIC8vIOa4hemZpOeZu+W9leS/oeaBrwogIHN0YXRpYyBjbGVhckxvZ2luSW5mbygpIHsKICAgIHRyeSB7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHRoaXMuTE9HSU5fSU5GT19LRVkpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoJ+a4hemZpOeZu+W9leS/oeaBr+Wksei0pTonLCBlcnJvcik7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9CgogIC8vIOiOt+WPluiupOivgWNvb2tpZQogIHN0YXRpYyBnZXRBdXRoQ29va2llcygpIHsKICAgIGNvbnN0IGxvZ2luSW5mbyA9IHRoaXMuZ2V0TG9naW5JbmZvKCk7CiAgICBpZiAoIWxvZ2luSW5mbyB8fCAhbG9naW5JbmZvLmRhdGEpIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgLy8g5LuO55m75b2V5pWw5o2u5Lit5o+Q5Y+WY29va2ll5L+h5oGvCiAgICAvLyDmoLnmja7lrp7pmYXnmoTlk43lupTnu5PmnoTosIPmlbTmj5Dlj5bpgLvovpEKICAgIHJldHVybiB0aGlzLmV4dHJhY3RDb29raWVzRnJvbURhdGEobG9naW5JbmZvLmRhdGEpOwogIH0KCiAgLy8g5LuO5pWw5o2u5Lit5o+Q5Y+WQ29va2llCiAgc3RhdGljIGV4dHJhY3RDb29raWVzRnJvbURhdGEoZGF0YSkgewogICAgdHJ5IHsKICAgICAgLy8g5qC55o2u5a6e6ZmF55qE55m75b2V5ZON5bqU57uT5p6E6LCD5pW05o+Q5Y+W6YC76L6RCiAgICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHsKICAgICAgICAvLyDlpoLmnpxkYXRh5piv5a2X56ym5Liy77yM5Y+v6IO955u05o6l5YyF5ZCr5LqGY29va2ll5L+h5oGvCiAgICAgICAgcmV0dXJuIGRhdGE7CiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGRhdGEgPT09ICdvYmplY3QnKSB7CiAgICAgICAgLy8g5aaC5p6cZGF0YeaYr+Wvueixoe+8jOafpeaJvmNvb2tpZeWtl+autQogICAgICAgIGlmIChkYXRhLmNvb2tpZSkgewogICAgICAgICAgcmV0dXJuIGRhdGEuY29va2llOwogICAgICAgIH0gZWxzZSBpZiAoZGF0YS5jb29raWVzKSB7CiAgICAgICAgICByZXR1cm4gZGF0YS5jb29raWVzOwogICAgICAgIH0gZWxzZSBpZiAoZGF0YS5kYXRhICYmIHR5cGVvZiBkYXRhLmRhdGEgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAvLyDlpoLmnpxkYXRh5a2X5q615piv5a2X56ym5Liy77yM5Y+v6IO95YyF5ZCr5LqGY29va2ll5L+h5oGvCiAgICAgICAgICByZXR1cm4gZGF0YS5kYXRhOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gbnVsbDsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoJ+aPkOWPlkNvb2tpZeS/oeaBr+Wksei0pTonLCBlcnJvcik7CiAgICAgIHJldHVybiBudWxsOwogICAgfQogIH0KfQpleHBvcnQgZGVmYXVsdCBCaWxpYmlsaUF1dGg7"},{"version":3,"names":["BilibiliAuth","LOGIN_INFO_KEY","saveLoginInfo","loginInfo","info","timestamp","Date","now","localStorage","setItem","JSON","stringify","console","log","error","getLoginInfo","infoStr","getItem","parse","expireTime","clearLoginInfo","isLoggedIn","removeItem","getAuthCookies","data","extractCookiesFromData","cookie","cookies"],"sources":["/Users/tbw/work/btProject/reaction-cut/frontend/src/utils/bilibiliAuth.js"],"sourcesContent":["// Bilibili认证工具类\n\nclass BilibiliAuth {\n  // 登录信息存储的键名\n  static LOGIN_INFO_KEY = 'bilibili_login_info'\n  \n  // 保存登录信息\n  static saveLoginInfo(loginInfo) {\n    try {\n      const info = {\n        ...loginInfo,\n        timestamp: Date.now()\n      }\n      localStorage.setItem(this.LOGIN_INFO_KEY, JSON.stringify(info))\n      console.log('登录信息已保存到本地存储:', info)\n      return true\n    } catch (error) {\n      console.error('保存登录信息失败:', error)\n      return false\n    }\n  }\n  \n  // 获取登录信息\n  static getLoginInfo() {\n    try {\n      const infoStr = localStorage.getItem(this.LOGIN_INFO_KEY)\n      if (!infoStr) {\n        return null\n      }\n      \n      const info = JSON.parse(infoStr)\n      \n      // 检查是否过期（24小时）\n      const now = Date.now()\n      const expireTime = 24 * 60 * 60 * 1000 // 24小时\n      if (now - info.timestamp > expireTime) {\n        this.clearLoginInfo()\n        return null\n      }\n      \n      return info\n    } catch (error) {\n      console.error('获取登录信息失败:', error)\n      return null\n    }\n  }\n  \n  // 检查是否已登录\n  static isLoggedIn() {\n    return this.getLoginInfo() !== null\n  }\n  \n  // 清除登录信息\n  static clearLoginInfo() {\n    try {\n      localStorage.removeItem(this.LOGIN_INFO_KEY)\n      return true\n    } catch (error) {\n      console.error('清除登录信息失败:', error)\n      return false\n    }\n  }\n  \n  // 获取认证cookie\n  static getAuthCookies() {\n    const loginInfo = this.getLoginInfo()\n    if (!loginInfo || !loginInfo.data) {\n      return null\n    }\n    \n    // 从登录数据中提取cookie信息\n    // 根据实际的响应结构调整提取逻辑\n    return this.extractCookiesFromData(loginInfo.data)\n  }\n  \n  // 从数据中提取Cookie\n  static extractCookiesFromData(data) {\n    try {\n      // 根据实际的登录响应结构调整提取逻辑\n      if (typeof data === 'string') {\n        // 如果data是字符串，可能直接包含了cookie信息\n        return data\n      } else if (typeof data === 'object') {\n        // 如果data是对象，查找cookie字段\n        if (data.cookie) {\n          return data.cookie\n        } else if (data.cookies) {\n          return data.cookies\n        } else if (data.data && typeof data.data === 'string') {\n          // 如果data字段是字符串，可能包含了cookie信息\n          return data.data\n        }\n      }\n      return null\n    } catch (error) {\n      console.error('提取Cookie信息失败:', error)\n      return null\n    }\n  }\n}\n\nexport default BilibiliAuth"],"mappings":"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","ignoreList":[]}]}